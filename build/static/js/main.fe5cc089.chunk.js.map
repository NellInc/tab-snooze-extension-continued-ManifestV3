{"version":3,"sources":["components/SnoozePanel/SnoozeModal.js","components/TodoPage/TodoPage.js","components/OptionsPage/ProBadge.js","core/debugStorage.js","core/storage.js","core/settings.js","core/analytics.js","components/SnoozePanel/icons/coffee.svg","components/SnoozePanel/icons/coffee_white.svg","components/SnoozePanel/icons/moon.svg","components/SnoozePanel/icons/moon_white.svg","components/SnoozePanel/icons/sun.svg","components/SnoozePanel/icons/sun_white.svg","components/SnoozePanel/icons/soffa.svg","components/SnoozePanel/icons/soffa_white.svg","components/SnoozePanel/icons/breifcase.svg","components/SnoozePanel/icons/breifcase_white.svg","components/SnoozePanel/icons/mailbox.svg","components/SnoozePanel/icons/mailbox_white.svg","components/SnoozePanel/icons/pine.svg","components/SnoozePanel/icons/pine_white.svg","components/SnoozePanel/icons/refresh.svg","components/SnoozePanel/icons/refresh_white.svg","components/SnoozePanel/icons/calendar.svg","components/SnoozePanel/icons/calendar_white.svg","components/SnoozePanel/images/super_star.svg","../ignored /Users/work/Desktop/Extension Projects_Work/tabsnooze-working/tab-snooze-extension-continued/node_modules/sanitize-html/node_modules/htmlparser2/lib readable-stream","../ignored /Users/work/Desktop/Extension Projects_Work/tabsnooze-working/tab-snooze-extension-continued/node_modules/sanitize-html/node_modules/postcss/lib supports-color","../ignored /Users/work/Desktop/Extension Projects_Work/tabsnooze-working/tab-snooze-extension-continued/node_modules/sanitize-html/node_modules/postcss/lib chalk","../ignored /Users/work/Desktop/Extension Projects_Work/tabsnooze-working/tab-snooze-extension-continued/node_modules/sanitize-html/node_modules/postcss/lib ./terminal-highlight","../ignored /Users/work/Desktop/Extension Projects_Work/tabsnooze-working/tab-snooze-extension-continued/node_modules/sanitize-html/node_modules/postcss/lib fs","components/TodoPage/images/change_color.svg","components/TodoPage/images/snooze.svg","bugsnag.js","components/TodoPage/images/todo_favicon_0.png","components/TodoPage/images/todo_favicon_1.png","components/TodoPage/images/todo_favicon_2.png","components/TodoPage/images/todo_favicon_3.png","GlobalStyles.js","Router.js","App.js","core/commands.js","core/migrations/migration000.js","core/migrationManager.js","core/backgroundMain.js","index.js","core/license.js","core/snooze.js","core/wakeup.js","core/audio.js","core/badge.js","theme.js","components/SnoozePanel/calcSnoozeOptions.js","components/SnoozePanel/ProCornerRibbon.js","components/SnoozePanel/SnoozeButton.js","components/SnoozePanel/SnoozeButtonsGrid.js","components/SnoozePanel/TooltipHelper.js","components/SnoozePanel/UpgradeDialog.js","components/SnoozePanel/SnoozeFooter.js","components/SnoozePanel/SnoozePanel.js","components/SnoozePanel/index.js","paths.js","core/utils.js","components/SnoozePanel/Button.js"],"names":["SnoozeModal","props","visible","noAnimation","children","enter","exit","Component","Overlay","styled","div","active","Modal","theme","snoozePanel","bgColor","TodoPage","todoTextRef","React","createRef","arrowRef","bodyRef","snoozeBtnEl","state","getTextAndColorFromUrl","snoozePanelOpen","text","current","focus","track","EVENTS","NEW_TODO","colorIndex","replace","history","pathname","TODO_PATH","search","queryString","stringify","color","location","parse","ignoreQueryPrefix","colorIndexStr","randomColorIndex","updateAddressBar","parseInt","setTextAndColor","TODO_COLORS","length","event","currentTarget","setState","sanitizeHtml","allowedTags","updateUrlTimer","clearTimeout","setTimeout","ESC","keyCode","TAB","RETURN","preventDefault","changeColor","isTextBoxFocused","document","activeElement","ctrlKey","altKey","metaKey","blur","execCommand","target","favicon","title","faviconEl","getElementById","setAttribute","colorHex","hex","renderDocumentHead","onKeyDown","bind","onPageClick","value","require","toggleSnoozePanel","TransitionProps","transformOrigin","borderRadius","overflow","BigIconButton","forwardRef","onClick","padding","marginRight","icon","Math","floor","random","Root","TodoText","ContentEditable","isplaceholder","css","Buttons","big","getUpgradeUrl","a","primary","window","tabSnoozeDebug_printTabs","getSnoozedTabs","tabs","console","log","forEach","tab","index","Date","when","toString","tabSnoozeDebug_createStorageBackup","backupName","chromep","storage","local","get","localStorageCopy","sync","syncStorageCopy","backups","STORAGE_KEY_BACKUPS","set","tabSnoozeDebug_restoreStorageBackup","resetStorage","requestedBackup","Error","clear","tabSnoozeDebug_resetStorage","tabSnoozeDebug_deleteAllBackups","remove","tabSnoozeDebug_printStorage","localStorage","syncStorage","STORAGE_KEY_TS_VERSION","STORAGE_KEY_TAB_COUNT","STORAGE_KEY_SNOOZED_TABS","STORAGE_KEY_SERVER_CONFIG","snoozedTabs","saveSnoozedTabs","STORAGE_KEY_SETTINGS","DEFAULT_SETTINGS","badge","BADGE_HIDDEN","playSoundEffects","playNotificationSound","showNotifications","weekStartDay","weekEndDay","workdayStart","workdayEnd","laterTodayHoursDelta","somedayMonthsDelta","version","totalSnoozeCount","installDate","weeklyUsage","weekNumber","usageCount","getSettings","settings","Object","assign","saveSettings","newSettings","currentSettings","resetSettings","printSettings","table","exposeFunctionForDebug","EXT_INSTALLED","EXT_UPDATED","EXT_UNINSTALLED","TAB_SNOOZE","REPEAT_SNOOZE","SLEEPING_TABS_VIEW","SETTINGS_VIEW","mixpanel","init","process","trackTabSnooze","snoozedTab","hostname","URL","url","type","people","increment","eventName","properties","APP_VERSION","addTrackingIdToUrl","tid","get_distinct_id","qs","bugsnagClient","bugsnag","apiKey","autoCaptureSessions","appVersion","appType","notifyReleaseStages","releaseStage","IS_BETA","beforeSend","report","stacktrace","stackItem","file","context","isBackgroundScript","use","bugsnagReact","ErrorBoundary","getPlugin","createGlobalStyle","fontFamily","black","AsyncComp","comp","Loadable","loader","loading","AsyncOptionsPage","AsyncTodoPage","AsyncFirstSnoozeDialog","AsyncRateTSDialog","AsyncBetaDialog","AsyncTutorial","Router","POPUP_PATH","SnoozePanel","OPTIONS_PATH","FIRST_SNOOZE_PATH","RATE_TS_PATH","BETA_PATH","TUTORIAL_PATH","App","muiTheme","styledComponentsTheme","COMMAND_SNOOZE_ACTIVE_TAB","COMMAND_REPEAT_LAST_SNOOZE","COMMAND_NEW_TODO","COMMAND_OPEN_SLEEPING_TABS","chrome","STORAGE_KEY_HISTORY","migrate","migrateSettings","migrateTabsFromSyncToLocal","migrateOldSnoozedTabsObjects","snoozeHistory","newTodoSC","undefined","showBadge","closeTabAfterSnooze","mailMyselfAddress","manyTabsThreshold","tabIdleTimeThreshold","repeatLastSnoozeSC","showSnoozedTabsSC","snoozeCurrentTabSC","readOldSnoozedTabs","storageArea","tabsCount","i","push","filter","migrateTodoPage","period","time","hour","includes","oldTodoParams","substring","indexOf","newTodoUrl","runtime","getURL","APP_BASE_PATH","bg","migrations","migration000","performMigrations","lastMigrationIndex","error","tabSnoozeDebug_performMigrations","runBackgroundScript","onStartup","addListener","extensionMain","registerWakeupEventListeners","registerBadgeEventListeners","onInstalled","reason","previousVersion","setUninstallURL","getTrackUninstallUrl","now","createTab","notifyAboutNewBetaVersion","commands","onCommand","command","repeatLastSnooze","SLEEPING_TABS_PATH","scheduleWakeupAlarm","updateBadge","notifications","create","message","iconUrl","requireInteraction","notificationId","onClicked","notifId","CHANGELOG_URL","removeListener","makeTabActive","rootEl","style","width","ReactDOM","render","FREE_WEEKLY_SNOOZE_COUNT","isProUser","isInPaywallTest","incrementWeeklyUsage","weeklyUsageCount","moment","week","isOverFreeWeeklyQuota","isInPaywallTestResult","snoozeTab","config","wakeupTime","closeTab","nextOccurrenceDate","calcNextOccurrenceForPeriod","getTime","favIconUrl","sleepStart","createCenteredWindow","id","snoozeActiveTab","getActiveTab","activeTab","lastSnooze","getRecentlySnoozedTab","resnoozePeriodicTab","newWakeupDate","WAKEUP_TABS_ALARM_NAME","wakeupThreshold","deleteSnoozedTabs","tabsToDelete","shouldDeleteTab","find","tabToDelete","areTabsEqual","newSnoozedTabs","wakeupTabs","tabsToWakeUp","makeActive","periodicTabs","createTabs","createdTabs","wakeupReadyTabs","findIndex","notify","metaData","addMinutes","readySleepingTabs","notifyUserAboutNewTabs","playAudio","SOUND_NOTIFICATION","cancelWakeupAlarm","alarmTime","nextTabToWakeup","getFirstTabToWakeup","alarms","registerEventListeners","onAlarm","alarm","name","idle","onStateChanged","newState","SOUND_TAB_SNOOZE1","SOUND_TAB_SNOOZE2","SOUND_TAB_SNOOZE3","then","loadAudio","sound","audio","Audio","src","preload","volume","loadSoundEffect","play","err","BADGE_DUE_TODAY","BADGE_TOTAL_SNOOZED","onChanged","snoozedCount","endOf","browserAction","setBadgeBackgroundColor","setBadgeText","dark","gray","beta","border","lightBorder","hoverColor","footerTextColor","buttonTextColor","countBadgeColor","whiteIcons","createMuiTheme","palette","main","ripple","typography","useNextVariants","htmlFontSize","overrides","MuiToolbar","root","height","MuiButton","SNOOZE_TYPE_REPEATED","SNOOZE_TYPE_SPECIFIC_DATE","calcSnoozeOptions","isVeryLateAtNight","isNightTime","isWeekend","day","roundDate","momentDate","minutes","seconds","millisecond","dayStart","laterTodayTime","add","thisEveningTime","tomorrowTime","weekendTime","nextWeekTime","inAMonthTime","somedayTime","activeIcon","tooltip","calendar","toDate","format","isProFeature","white","Ribbon","SNOOZE_CLICK_EFFECT_TIME","SnoozeButton","focused","pressed","proBadge","onMouseLeave","onMouseEnter","withTheme","Button","button","Icon","IconWrapper","img","hide","OverlayIcon","Title","SnoozeButtonsGrid","buttons","map","ButtonsGrid","TOOLTIP_SHOW_TIMEOUT","TOOLTIP_HIDE_TIMEOUT","WrappedComponent","TooltipHelper","tooltipShowTimeout","tooltipHideTimeout","tooltipVisible","tooltipText","preventTooltip","onTooltipAreaMouseEnter","onTooltipAreaMouseLeave","CONTINUE_DELAY","UpgradeDialog","canContinue","onDismiss","Star","Subtitle","BuyButton","NoThanksButton","attrs","ProgressBar","horizontalShrink","keyframes","Progress","SnoozeFooter","sleepingTabsCount","upgradeBadge","betaBadge","Link","SETTINGS_PATH","Footer","SnoozeTooltip","TooltipButton","FooterBtn","SleepinCountBadge","SleepingTabsBtn","BadgeButton","UpgradeBadge","BetaBadge","IconBtn","AsyncPeriodSelector","AsyncDateSelector","selectedSnoozeOptionId","focusedButtonIndex","snoozeOptions","selectorDialogOpen","isOverFreePlanLimit","Promise","all","loadSnoozeSound","nextFocusedIndex","key","keycode","mappedOptionIndex","SNOOZE_SHORTCUT_KEYS","toUpperCase","numpadKey","onSnoozeButtonClicked","focusedSnoozeOption","Number","isInteger","snoozeOption","delayedSnoozeActiveTab","date","snoozeOpt","ev","hideFooter","snoozeButtons","getSnoozeButtons","onKeyPress","ref","onSnoozePeriodSelected","onSnoozeSpecificDateSelected","snoozeSound","L","E","T","W","N","I","M","S","R","P","D","CONSECUTIVE_SNOOZE_TIMEOUT","SNOOZE_SOUNDS","close","playSnoozeSound","consecutiveCount","countConsecutiveSnoozes","nextSoundIndex","BACKGROUND_PATH","CHROME_WEB_STORE_INSTALL_SHARE_LINK","CHROME_WEB_STORE_REVIEW","PAYPAL_DONATE_URL","CHROME_SETTINGS_SHORTCUTS","MESSENGER_PROFILE_URL","TAB_SNOOZE_FEATURE_VOTE_URL","BETA_INSTRUCTIONS_URL","TS_HOMEPAGE_URL","SERVER_CONFIG_URL","UPGRADE_URL","TRACK_UNINSTALL_URL","AMAZON_AFFILIATE_ID","hashPath","hash","isMacOS","navigator","platform","functions","Array","isArray","fn","tabInfos","allTabsCreatedPromise","tabInfo","attachAffiliationTag","parsedUrl","query","tag","path","windows","left","round","screen","top","newWindow","update","startsWith","newTab","windowId","jumpToTab","join","faviconUrl","imageUrlToBase64","faviconURI","createdNotifId","currentWindow","occurrences","today","tomorrow","weekIndex","days","weekdayIndex","thisMonth","nextMonth","thisYear","month","nextYear","occurrence","momentWithHour","nextFutureOccurrence","isAfter","aMoment","h","m","hours","compareTabs","tab1","tab2","ordinalNum","n","localeData","ordinal","consecutiveSnoozeTimeout","sort","tabA","tabB","previousTime","timeGap","fetch","response","body","getReader","read","result","btoa","String","fromCharCode","apply","base64","headers","dataURI","REACT_APP_IS_BETA","getManifest","raised","Color","darken","disabled"],"mappings":"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","file":"static/js/main.fe5cc089.chunk.js","sourcesContent":["// @flow\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Zoom from '@material-ui/core/Zoom';\n\ntype Props = {\n  children: any,\n  visible: boolean,\n  noAnimation?: boolean,\n};\n\nexport default class SnoozeModal extends Component<Props> {\n  render() {\n    const { visible, noAnimation, children } = this.props;\n    return (\n      <Overlay active={visible}>\n        {/* mountOnEnter so to render fast and open the popup fast */}\n        <Zoom\n          in={visible}\n          timeout={{ enter: noAnimation ? 0 : 300, exit: 300 }}\n          direction=\"up\"\n          mountOnEnter\n        >\n          <Modal visible={visible}>{children}</Modal>\n        </Zoom>\n      </Overlay>\n    );\n  }\n}\n\nconst Overlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: ${props => (props.active ? 'auto' : 'none')};\n  background-color: rgba(0, 0, 0, 0.2);\n\n  padding: 10px;\n  transition: opacity 300ms;\n  opacity: ${props => (props.active ? 1 : 0)};\n`;\n\nconst Modal = styled.div`\n  background-color: ${props => props.theme.snoozePanel.bgColor};\n  border-radius: 5px;\n  padding: 10px;\n  /* margin: 10px; */\n  height: 100%;\n\n  box-shadow: 0 0px 10px 0 rgba(0, 0, 0, 0.28);\n`;\n","// @flow\n\nimport React, { Component, Fragment } from 'react';\nimport styled, { css } from 'styled-components';\nimport ContentEditable from 'react-contenteditable';\nimport queryString from 'query-string';\nimport { TODO_PATH } from '../../paths';\nimport Fade from '@material-ui/core/Fade';\nimport Grow from '@material-ui/core/Grow';\nimport IconButton from '@material-ui/core/IconButton';\nimport { track, EVENTS } from '../../core/analytics';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport SnoozePanel from '../SnoozePanel';\nimport sanitizeHtml from 'sanitize-html';\n\ntype Props = {\n  location: any, // from react-router-dom\n  history: any, // from react-router-dom\n};\ntype State = {\n  text: string,\n  colorIndex: number,\n  snoozePanelOpen: boolean,\n};\n\nexport default class TodoPage extends Component<Props, State> {\n  todoTextRef: any = React.createRef();\n  arrowRef: any = React.createRef();\n  bodyRef: any = React.createRef();\n  snoozeBtnEl: any = null;\n  updateUrlTimer: ?TimeoutID;\n\n  constructor(props: Props) {\n    super(props);\n\n    // init state with color & text from url\n    this.state = {\n      ...this.getTextAndColorFromUrl(),\n      snoozePanelOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    const { text } = this.state;\n\n    if (!text) {\n      this.todoTextRef.current.focus();\n\n      track(EVENTS.NEW_TODO);\n    }\n  }\n\n  updateAddressBar(text: string, colorIndex: number) {\n    // replace '_' with spaces because they are encoded nicely\n    // in the address bar\n    text = text.replace(/ /g, '_');\n    // .replace(/&nbsp;/g, '_')\n    // .replace(/<div>/g, '_')\n    // .replace(/<\\/div>/g, '')\n    // .replace(/<br>/g, '');\n\n    this.props.history.replace({\n      pathname: TODO_PATH,\n      search:\n        '?' +\n        queryString.stringify({\n          color: colorIndex,\n          text: text,\n        }),\n    });\n  }\n\n  getTextAndColorFromUrl() {\n    const { location } = this.props;\n\n    let { text, color: colorIndexStr } = queryString.parse(\n      location.search,\n      {\n        ignoreQueryPrefix: true,\n      }\n    );\n\n    let colorIndex;\n\n    if (!colorIndexStr) {\n      // random a new color\n      colorIndex = randomColorIndex();\n\n      this.updateAddressBar(text || '', colorIndex);\n    } else {\n      colorIndex = parseInt(colorIndexStr);\n    }\n\n    if (!text) {\n      text = '';\n    }\n\n    // replace '_' with spaces\n    text = text.replace(/_/g, ' ');\n\n    return { text, colorIndex };\n  }\n\n  changeColor() {\n    const { text, colorIndex } = this.state;\n    this.setTextAndColor(text, (colorIndex + 1) % TODO_COLORS.length);\n  }\n\n  toggleSnoozePanel(event: any) {\n    this.snoozeBtnEl = event.currentTarget;\n    this.setState({ snoozePanelOpen: !this.state.snoozePanelOpen });\n  }\n\n  setTextAndColor(text: string, colorIndex: number) {\n    // remove styling and <br>/<div> from contenteditable\n    text = sanitizeHtml(text, { allowedTags: [] });\n\n    this.setState({ text, colorIndex });\n\n    if (this.updateUrlTimer) {\n      clearTimeout(this.updateUrlTimer);\n    }\n\n    this.updateUrlTimer = setTimeout(() => {\n      this.updateUrlTimer = null;\n      this.updateAddressBar(text, colorIndex);\n    }, 700);\n  }\n\n  onKeyDown(event: any) {\n    const ESC = event.keyCode === 27;\n    const TAB = event.keyCode === 9;\n    const RETURN = event.keyCode === 13;\n\n    if (TAB) {\n      event.preventDefault();\n      this.changeColor();\n    }\n\n    const todoTextRef = this.todoTextRef.current;\n    const isTextBoxFocused = document.activeElement === todoTextRef;\n\n    if (RETURN) {\n      if (isTextBoxFocused) {\n        if (!event.ctrlKey && !event.altKey && !event.metaKey) {\n          event.preventDefault();\n          todoTextRef.blur();\n        }\n      } else {\n        event.preventDefault();\n        todoTextRef.focus();\n        document.execCommand('selectAll', false, null);\n      }\n    }\n\n    if (ESC && isTextBoxFocused) {\n      todoTextRef.blur();\n    }\n  }\n\n  onPageClick(event: any) {\n    // close panel only if click was directly on Root element or text element.\n    // ignore clicks on buttons, and the panel itself\n    if (\n      event.target === this.bodyRef.current ||\n      event.target === this.todoTextRef.current\n    ) {\n      this.setState({ snoozePanelOpen: false });\n    }\n  }\n\n  renderDocumentHead(text: string, favicon: string) {\n    document.title = text.replace(/&nbsp;/g, ' ') || 'New Todo';\n    const faviconEl = document.getElementById('faviconEl');\n\n    if (faviconEl) {\n      faviconEl.setAttribute('href', favicon);\n    }\n  }\n\n  render() {\n    const { text, colorIndex, snoozePanelOpen } = this.state;\n    const { hex: colorHex, favicon } = TODO_COLORS[colorIndex];\n\n    this.renderDocumentHead(text, favicon);\n\n    return (\n      <Fragment>\n        <Fade in timeout={1000}>\n          <Root\n            color={colorHex}\n            onKeyDown={this.onKeyDown.bind(this)}\n            onClick={this.onPageClick.bind(this)}\n            ref={this.bodyRef}\n          >\n            <TodoText\n              innerRef={this.todoTextRef}\n              dir=\"auto\"\n              html={text}\n              onChange={event =>\n                this.setTextAndColor(event.target.value, colorIndex)\n              }\n              // goes to dom, so is written as string\n              isplaceholder={text === '' ? 'true' : 'false'}\n            />\n\n            <Buttons>\n              <BigIconButton\n                icon={require('./images/change_color.svg')}\n                onClick={this.changeColor.bind(this)}\n              />\n              <BigIconButton\n                icon={require('./images/snooze.svg')}\n                onClick={this.toggleSnoozePanel.bind(this)}\n              />\n              <Popper\n                id={snoozePanelOpen ? 'simple-popper' : null}\n                open={snoozePanelOpen}\n                placement=\"top-start\"\n                anchorEl={this.snoozeBtnEl}\n                transition\n                // modifiers={{\n                //   arrow: {\n                //     enabled: true,\n                //     element: this.arrowRef.current,\n                //   },\n                // }}\n              >\n                {({ TransitionProps }) => (\n                  <Grow\n                    {...TransitionProps}\n                    timeout={250}\n                    style={{ transformOrigin: '0 100% 0' }}\n                  >\n                    <Paper\n                      style={{ borderRadius: 5, overflow: 'hidden' }}\n                    >\n                      <SnoozePanel hideFooter />\n                    </Paper>\n                  </Grow>\n                )}\n              </Popper>\n            </Buttons>\n          </Root>\n        </Fade>\n      </Fragment>\n    );\n  }\n}\n\nconst BigIconButton = (props: {\n  onClick: () => void,\n  icon: string,\n  forwardRef?: any,\n}) => (\n  <IconButton\n    ref={props.forwardRef}\n    onClick={props.onClick}\n    style={{ padding: 30, marginRight: 10 }}\n  >\n    <img src={props.icon} alt=\"_\" />\n  </IconButton>\n);\n\nexport const TODO_COLORS = [\n  { favicon: require('./images/todo_favicon_0.png'), hex: '#F2B32A' },\n  { favicon: require('./images/todo_favicon_1.png'), hex: '#4688F1' },\n  { favicon: require('./images/todo_favicon_2.png'), hex: '#1D9C5A' },\n  { favicon: require('./images/todo_favicon_3.png'), hex: '#EB2249' },\n];\n\nfunction randomColorIndex() {\n  return Math.floor(Math.random() * TODO_COLORS.length);\n}\n\nconst Root = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n\n  transition: all 1s !important;\n\n  background-color: ${props => props.color};\n`;\n\nconst TodoText = styled(ContentEditable)`\n  cursor: text;\n  color: white;\n  max-width: 85%;\n  min-width: 50%;\n\n  font-size: 9vmin;\n  line-height: 12.2vmin;\n  font-weight: 200;\n\n  outline: none;\n  border-radius: 10px;\n  padding: 20px;\n  transition: background-color 0.2s;\n\n  ::selection {\n    background: rgba(0, 0, 0, 0.2);\n  }\n\n  :hover {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n  :focus {\n    background-color: rgba(0, 0, 0, 0.2);\n  }\n\n  ${props =>\n    props.isplaceholder === 'true' &&\n    css`\n      :after {\n        color: rgba(255, 255, 255, 0.3);\n        content: 'Type a todo...';\n      }\n    `}\n`;\n\nconst Buttons = styled.div`\n  display: flex;\n\n  position: fixed;\n  bottom: 20px;\n  left: 20px;\n`;\n","// @flow\nimport React from 'react';\nimport styled from 'styled-components';\nimport { getUpgradeUrl } from '../../paths';\n\nexport default ({ big }: { big?: boolean }) => (\n  <Root big={big} href={getUpgradeUrl()} target=\"_blank\">\n    PRO\n  </Root>\n);\n\nconst Root = styled.a`\n  display: inline-block;\n  line-height: normal;\n  background-color: ${props => props.theme.primary};\n  padding: 3px 6px;\n  border-radius: 5px;\n  color: #fff;\n  font-weight: 700;\n  font-size: ${props => (props.big ? 20 : 14)}px;\n  margin-left: 3px;\n`;\n","// @flow\nimport chromep from 'chrome-promise';\nimport { getSnoozedTabs, STORAGE_KEY_BACKUPS } from './storage';\n\nwindow.tabSnoozeDebug_printTabs = async function() {\n  const tabs = await getSnoozedTabs();\n\n  console.log('## Snoozed Tabs ##');\n  tabs.forEach((tab, index) =>\n    console.log(\n      `${index}.\\t${tab.title}\\n\\t${new Date(tab.when).toString()}`\n    )\n  );\n};\n\n// For debugging, backing up whole storage\nwindow.tabSnoozeDebug_createStorageBackup = async function(\n  backupName: string\n) {\n  const localStorageCopy = await chromep.storage.local.get();\n  const syncStorageCopy = await chromep.storage.sync.get();\n\n  // get current backups\n  const backups = localStorageCopy[STORAGE_KEY_BACKUPS] || {};\n\n  // don't backup the backups\n  delete localStorageCopy[STORAGE_KEY_BACKUPS];\n\n  // Add storageToBackup to backups\n  backups[backupName] = {\n    local: localStorageCopy,\n    sync: syncStorageCopy,\n  };\n  await chromep.storage.local.set({ [STORAGE_KEY_BACKUPS]: backups });\n  console.log(`Backup complete to \"${backupName}\"`);\n};\n\nwindow.tabSnoozeDebug_restoreStorageBackup = async function(\n  backupName: string\n) {\n  // restore an exact snapshot of the backup as it was,\n  // so reset whatever is there right now, before restoring\n  await resetStorage();\n\n  const { backups } = await chromep.storage.local.get(\n    STORAGE_KEY_BACKUPS\n  );\n\n  const requestedBackup = backups[backupName];\n\n  if (!requestedBackup) {\n    throw new Error('Couldnt find a backup with that name');\n  }\n\n  await chromep.storage.local.set(requestedBackup.local);\n  await chromep.storage.sync.set(requestedBackup.sync);\n\n  console.log(`Backup \"${backupName}\" restored`);\n};\n\nasync function resetStorage() {\n  // pull backups to the side\n  const { backups } = await chromep.storage.local.get(\n    STORAGE_KEY_BACKUPS\n  );\n\n  // wipe out storage\n  await chromep.storage.local.clear();\n  await chromep.storage.sync.clear();\n\n  // push backups back\n  await chromep.storage.local.set({ [STORAGE_KEY_BACKUPS]: backups });\n\n  console.log('Storage was reset');\n}\n\nwindow.tabSnoozeDebug_resetStorage = resetStorage;\n\nwindow.tabSnoozeDebug_deleteAllBackups = async function() {\n  await chromep.storage.local.remove(STORAGE_KEY_BACKUPS);\n  console.log('Backups deleted');\n};\n\nwindow.tabSnoozeDebug_printStorage = async function() {\n  const localStorage = await chromep.storage.local.get();\n  const syncStorage = await chromep.storage.sync.get();\n\n  console.log('localStorage: ', localStorage);\n  console.log('syncStorage: ', syncStorage);\n};\n","// @flow\nimport chromep from 'chrome-promise';\nimport './debugStorage';\n\nexport const STORAGE_KEY_TS_VERSION = 'tsVersion';\nexport const STORAGE_KEY_TAB_COUNT = 'tabsCount';\nexport const STORAGE_KEY_SNOOZED_TABS = 'snoozedTabs';\nexport const STORAGE_KEY_SERVER_CONFIG = 'serverConfig';\nexport const STORAGE_KEY_BACKUPS = 'backups';\n\n// version 2.0\n// export const STORAGE_KEY_TAB_COUNT = 'tabsCount';\n// export const STORAGE_KEY_HISTORY = 'history';\n\n/*\n    Storage sync has a QUOTA_BYTES_PER_ITEM of 4000, so we save\n    each tab in a different key... instead of one big array :( it's sad\n*/\nexport async function getSnoozedTabs(): Promise<Array<SnoozedTab>> {\n  const { snoozedTabs } = await chromep.storage.local.get(\n    STORAGE_KEY_SNOOZED_TABS\n  );\n\n  return snoozedTabs || [];\n}\n\nexport function saveSnoozedTabs(\n  snoozedTabs: Array<SnoozedTab>\n): Promise<void> {\n  return chromep.storage.local.set({\n    [STORAGE_KEY_SNOOZED_TABS]: snoozedTabs,\n  });\n}\n\n// export function getSnoozeHistory() {\n//   return chromep.storage.local\n//     .get()\n//     .then(allStorage => allStorage.snoozeHistory || []);\n// }\n\n// export async function addTabToHistory(tabInfo) {\n//   const history = await getSnoozeHistory();\n//   history.push(tabInfo);\n\n//   chromep.storage.local.set({ snoozeHistory: history });\n\n//   return history;\n// }\n","// @flow\nimport chromep from 'chrome-promise';\nimport { BADGE_HIDDEN } from './badge';\nimport { exposeFunctionForDebug } from './utils';\n\nexport const STORAGE_KEY_SETTINGS = 'settings';\n\nexport const DEFAULT_SETTINGS: Settings = {\n  // General\n  badge: BADGE_HIDDEN,\n  playSoundEffects: true,\n  playNotificationSound: true,\n  showNotifications: true,\n\n  // Snooze times\n  weekStartDay: 1, // Sunday(0) or Monday(1)\n  weekEndDay: 6, // Friday (5) or Saturday(6)\n  workdayStart: 8,\n  workdayEnd: 19,\n  laterTodayHoursDelta: 3,\n  somedayMonthsDelta: 3,\n\n  // general data\n  version: 3,\n  totalSnoozeCount: 0,\n  installDate: 0,\n  weeklyUsage: {\n    weekNumber: 0,\n    usageCount: 0,\n  },\n};\n\nexport async function getSettings(): Promise<Settings> {\n  let { settings } = await chromep.storage.local.get(\n    STORAGE_KEY_SETTINGS\n  );\n\n  // Add new settings keys, preserve user old preferences\n  return Object.assign({}, DEFAULT_SETTINGS, settings);\n}\n\nexport async function saveSettings(\n  newSettings: $Shape<Settings>\n): Promise<void> {\n  const currentSettings = await getSettings();\n\n  newSettings = Object.assign(currentSettings, newSettings);\n\n  return chromep.storage.local.set({\n    [STORAGE_KEY_SETTINGS]: newSettings,\n  });\n}\n\nasync function resetSettings() {\n  chromep.storage.local.remove(STORAGE_KEY_SETTINGS);\n}\n\nasync function printSettings() {\n  const settings = await getSettings();\n  console.table(settings);\n}\n\nexposeFunctionForDebug([\n  getSettings,\n  saveSettings,\n  printSettings,\n  resetSettings,\n]);\n","// @flow\nimport mixpanel from 'mixpanel-browser';\nimport { getSnoozedTabs } from './storage';\nimport { APP_VERSION } from './utils';\nimport qs from 'query-string';\n\nexport const EVENTS = {\n  EXT_INSTALLED: 'Extension Install',\n  EXT_UPDATED: 'Extension Update',\n  EXT_UNINSTALLED: 'Extension Uninstall',\n  TAB_SNOOZE: 'Tab Snooze',\n  REPEAT_SNOOZE: 'Repeat Snooze',\n  NEW_TODO: 'New Todo',\n  SLEEPING_TABS_VIEW: 'Sleeping Tabs View',\n  SETTINGS_VIEW: 'Settings View',\n};\n\n// Init Mixpanel\nmixpanel.init(process.env.REACT_APP_MIXPANEL_TOKEN);\n\n// identify user\n// initUserTracking();\n\n// async function initUserTracking() {\n//   const { betaTester } = await chromep.storage.local.get(\n//     'betaTester'\n//   );\n\n// mixpanel.people.set({ \"Plan\": \"Premium\" });\n\n//   if (!betaTester) {\n//     // Not registered yet, show welcome page\n//     // newCenteredWindow('html/betaWelcome.html');\n//   } else {\n//     // continue tracking user\n//     var userEmail = betaTester.email;\n\n//     mixpanel.identify(userEmail);\n//   }\n// }\n\n/*\n    This function must be called after beta tester idetifies himself \n    so that upcoming future events will attach to a his/her user id.\n*/\n// export function setupUserTracking(email: string, name: string) {\n//   email = email.trim();\n//   name = name.trim();\n\n//   // The recommended usage pattern is to call mixpanel.alias when the user signs up,\n//   // and mixpanel.identify when they log in\n//   mixpanel.identify(email);\n\n//   mixpanel.people.set({\n//     $name: name,\n//     $email: email,\n//     $created: new Date(),\n//   });\n\n//   mixpanel.track('Signup');\n\n//   chromep.storage.local.set({\n//     betaTester: {\n//       email: email,\n//       name: name,\n//     },\n//   });\n// }\n\nexport async function trackTabSnooze(snoozedTab: SnoozedTab) {\n  const snoozedTabs = await getSnoozedTabs();\n\n  var hostname = new URL(snoozedTab.url).hostname;\n\n  track(EVENTS.TAB_SNOOZE, {\n    'Snooze Type': snoozedTab.type,\n    'Sleeping Tabs': snoozedTabs.length,\n    'Snoozed Domain': hostname,\n  });\n  mixpanel.people.increment('tabs snoozed');\n  mixpanel.people.set({\n    'Sleeping Tabs': snoozedTabs.length,\n  });\n}\n\nexport function track(eventName: string, properties?: Object = {}) {\n  mixpanel.track(eventName, {\n    'App Version': APP_VERSION,\n    ...properties,\n  });\n}\n\n/**\n * We pass 'uid' param to tabsnooze.com so we can keep tracking\n * the user there under the same session\n */\nexport function addTrackingIdToUrl(url: string) {\n  const tid = mixpanel.get_distinct_id();\n\n  return `${url}?${qs.stringify({ tid })}`;\n}\n","module.exports = __webpack_public_path__ + \"static/media/coffee.027d6bb9.svg\";","module.exports = __webpack_public_path__ + \"static/media/coffee_white.bf3f6620.svg\";","module.exports = __webpack_public_path__ + \"static/media/moon.2b67588d.svg\";","module.exports = __webpack_public_path__ + \"static/media/moon_white.2596761f.svg\";","module.exports = __webpack_public_path__ + \"static/media/sun.d225a821.svg\";","module.exports = __webpack_public_path__ + \"static/media/sun_white.a90749eb.svg\";","module.exports = __webpack_public_path__ + \"static/media/soffa.357d8c57.svg\";","module.exports = __webpack_public_path__ + \"static/media/soffa_white.ca24f6d5.svg\";","module.exports = __webpack_public_path__ + \"static/media/breifcase.c0751b85.svg\";","module.exports = __webpack_public_path__ + \"static/media/breifcase_white.8763cfff.svg\";","module.exports = __webpack_public_path__ + \"static/media/mailbox.b4fdc390.svg\";","module.exports = __webpack_public_path__ + \"static/media/mailbox_white.164f0de6.svg\";","module.exports = __webpack_public_path__ + \"static/media/pine.b5e6560d.svg\";","module.exports = __webpack_public_path__ + \"static/media/pine_white.bd60eb21.svg\";","module.exports = __webpack_public_path__ + \"static/media/refresh.4c5f856e.svg\";","module.exports = __webpack_public_path__ + \"static/media/refresh_white.4afc215f.svg\";","module.exports = __webpack_public_path__ + \"static/media/calendar.5f7811e9.svg\";","module.exports = __webpack_public_path__ + \"static/media/calendar_white.b0bc5afa.svg\";","module.exports = __webpack_public_path__ + \"static/media/super_star.699dff2b.svg\";","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","module.exports = __webpack_public_path__ + \"static/media/change_color.9150acd3.svg\";","module.exports = __webpack_public_path__ + \"static/media/snooze.280e8302.svg\";","// @flow\n\nimport bugsnag from '@bugsnag/js';\nimport bugsnagReact from '@bugsnag/plugin-react';\nimport React from 'react';\nimport {\n  APP_VERSION,\n  isBackgroundScript,\n  IS_BETA,\n} from './core/utils';\n\n// init bug monitoring\nconst bugsnagClient = bugsnag({\n  apiKey: process.env.REACT_APP_BUGSNAG_API_KEY,\n  autoCaptureSessions: false,\n  appVersion: APP_VERSION,\n  appType: 'extension',\n  notifyReleaseStages: ['production', 'staging'],\n  releaseStage: IS_BETA ? 'staging' : process.env.NODE_ENV,\n\n  beforeSend: function(report) {\n    report.stacktrace.forEach(\n      stackItem =>\n        (stackItem.file = stackItem.file.replace(\n          /chrome-extension:/g,\n          'chromeextension:'\n        ))\n    );\n  },\n});\nbugsnagClient.context = isBackgroundScript()\n  ? 'extension/background'\n  : 'extension/foreground';\n\n// Uncomment for testing:\n// bugsnagClient.notify(new Error('Hello'));\n\nbugsnagClient.use(bugsnagReact, React);\n\n// wrap your entire app tree in the ErrorBoundary provided\nexport const ErrorBoundary = bugsnagClient.getPlugin('react');\n\nexport default bugsnagClient;\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","import { createGlobalStyle } from 'styled-components';\n\nexport default createGlobalStyle`\n\n  @font-face {\n    font-family: 'Roboto';\n    font-style: normal;\n    font-weight: 400;\n    src: url('fonts/Roboto-Regular.ttf') format('ttf');\n  }\n\n  @font-face {\n    font-family: 'Roboto';\n    font-style: normal;\n    font-weight: 500;\n    src: url('fonts/Roboto-Medium.ttf') format('ttf');\n  }\n\n  @font-face {\n    font-family: 'Roboto';\n    font-style: normal;\n    font-weight: 700;\n    src: url('fonts/Roboto-Bold.ttf') format('ttf');\n  }\n\n  a {\n    cursor: pointer;\n    text-decoration: none;\n    color: currentColor;\n  }\n\n  button {\n    padding: 0;\n    background-color: #fff;\n  }\n\n  *::selection {\n    background: ${props => props.theme.primary};\n    color: #fff;\n  }\n\n  *:focus {\n    outline: none;\n  }\n\n  html {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n\n    /* remove mobile tap highlight */\n    -webkit-tap-highlight-color: transparent; \n\n    font-size: 62.5%;\n  }\n\n  body {\n    font: 400 1.6rem/1.3 ${props => props.theme.fontFamily};\n    color: ${props => props.theme.black};\n    background-color: #fff;\n  }\n`;\n","// @flow\n\nimport React, { Fragment } from 'react';\nimport { HashRouter, Route } from 'react-router-dom';\nimport SnoozePanel from './components/SnoozePanel';\nimport {\n  POPUP_PATH,\n  OPTIONS_PATH,\n  TODO_PATH,\n  FIRST_SNOOZE_PATH,\n  RATE_TS_PATH,\n  BETA_PATH,\n  TUTORIAL_PATH,\n} from './paths';\nimport Loadable from 'react-loadable';\n\nconst AsyncComp = comp =>\n  Loadable({ loader: comp, loading: () => null });\n\nconst AsyncOptionsPage = AsyncComp(() =>\n  import('./components/OptionsPage')\n);\nconst AsyncTodoPage = AsyncComp(() =>\n  import('./components/TodoPage')\n);\nconst AsyncFirstSnoozeDialog = AsyncComp(() =>\n  import('./components/dialogs/FirstSnoozeDialog')\n);\nconst AsyncRateTSDialog = AsyncComp(() =>\n  import('./components/dialogs/RateTSDialog')\n);\nconst AsyncBetaDialog = AsyncComp(() =>\n  import('./components/dialogs/BetaDialog')\n);\nconst AsyncTutorial = AsyncComp(() =>\n  import('./components/dialogs/Tutorial')\n);\n\nconst Router = () => (\n  // \"noslash\" - creates hashes like # and #sunshine/lollipops\n  <HashRouter hashType=\"noslash\">\n    <Fragment>\n      <Route path={POPUP_PATH} component={SnoozePanel} />\n      <Route path={OPTIONS_PATH} component={AsyncOptionsPage} />\n      <Route path={TODO_PATH} component={AsyncTodoPage} />\n      <Route\n        path={FIRST_SNOOZE_PATH}\n        component={AsyncFirstSnoozeDialog}\n      />\n      <Route path={RATE_TS_PATH} component={AsyncRateTSDialog} />\n      <Route path={BETA_PATH} component={AsyncBetaDialog} />\n      <Route path={TUTORIAL_PATH} component={AsyncTutorial} />\n    </Fragment>\n  </HashRouter>\n);\n\nexport default Router;\n","import 'sanitize.css';\nimport React, { Component } from 'react';\nimport { muiTheme, styledComponentsTheme } from './theme';\nimport GlobalStyles from './GlobalStyles';\nimport { ThemeProvider } from 'styled-components';\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport Router from './Router';\n\nclass App extends Component {\n  render() {\n    return (\n      <MuiThemeProvider theme={muiTheme}>\n        <ThemeProvider theme={styledComponentsTheme}>\n          <React.Fragment>\n            <GlobalStyles />\n            <Router />\n          </React.Fragment>\n        </ThemeProvider>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// @flow\n\nexport const COMMAND_SNOOZE_ACTIVE_TAB = '_execute_browser_action';\nexport const COMMAND_REPEAT_LAST_SNOOZE = 'repeat_last_snooze';\nexport const COMMAND_NEW_TODO = 'new_todo_page';\nexport const COMMAND_OPEN_SLEEPING_TABS = 'open_snoozed_list';\n","/**\n * Migrate storage of Tab Snooze version 1 to 2\n */\n\n// @flow\nimport chromep from 'chrome-promise';\nimport { TODO_COLORS } from '../../components/TodoPage/TodoPage';\nimport { APP_BASE_PATH, TODO_PATH } from '../../paths';\nimport qs from 'query-string';\n\n// Adding chrome manually to global scope, for ESLint\nconst chrome = window.chrome;\n\nexport const STORAGE_KEY_SETTINGS = 'settings';\nexport const STORAGE_KEY_SNOOZED_TABS = 'snoozedTabs';\nexport const STORAGE_KEY_HISTORY = 'snoozeHistory';\n\nexport default async function migrate() {\n  console.log('Migrating settings...');\n  await migrateSettings();\n  console.log('Migrating tabs from sync storage to local...');\n  await migrateTabsFromSyncToLocal();\n  console.log('Migrating old tabs objects to new ones...');\n  await migrateOldSnoozedTabsObjects();\n}\n\n/**\n * Remove unused settings from TS1.\n * And add total snooze count to settings based on old history.\n */\nasync function migrateSettings() {\n  let { settings, snoozeHistory } = await chromep.storage.local.get([\n    STORAGE_KEY_SETTINGS,\n    STORAGE_KEY_HISTORY,\n  ]);\n\n  settings = settings || {};\n  snoozeHistory = snoozeHistory || [];\n\n  // if already migrated, stop migration\n  if (settings.newTodoSC === undefined) {\n    return;\n  }\n\n  // Remove some unused settings\n  delete settings.showBadge;\n  delete settings.closeTabAfterSnooze;\n  delete settings.mailMyselfAddress;\n  delete settings.manyTabsThreshold;\n  delete settings.tabIdleTimeThreshold;\n  delete settings.newTodoSC;\n  delete settings.repeatLastSnoozeSC;\n  delete settings.showSnoozedTabsSC;\n  delete settings.snoozeCurrentTabSC;\n\n  // add total count from history\n  settings.totalSnoozeCount =\n    settings.totalSnoozeCount || snoozeHistory.length;\n\n  // remove history so it won't take up huge amount of space\n  // (some users have maxed out the local storage, and the rest\n  // of the migration will fail if we dont free up space)\n  await chromep.storage.local.remove(STORAGE_KEY_HISTORY);\n\n  // save new settings format\n  await chromep.storage.local.set({\n    [STORAGE_KEY_SETTINGS]: settings,\n  });\n}\n\n/**\n * Read old tabs from sync storage and save them in local storage\n */\nasync function migrateTabsFromSyncToLocal() {\n  let { snoozedTabs } = await chromep.storage.local.get(\n    STORAGE_KEY_SNOOZED_TABS\n  );\n\n  // if already migrated, stop migration\n  if (snoozedTabs != null) {\n    return;\n  }\n\n  // read from sync storage (Old TabSnooze 1 storage)\n  snoozedTabs = await readOldSnoozedTabs(chromep.storage.sync);\n\n  if (snoozedTabs.length === 0) {\n    // read from local storage (TabSnooze 2 first Beta stages)\n    snoozedTabs = await readOldSnoozedTabs(chromep.storage.local);\n  }\n\n  // save in local storage\n  await chromep.storage.local.set({\n    [STORAGE_KEY_SNOOZED_TABS]: snoozedTabs,\n  });\n}\n\n/**\n * Read TS1 snoozedTabs stored in Sync storage, as different keys,\n * and return a JS array of snoozed tabs.\n */\nexport async function readOldSnoozedTabs(\n  storageArea: typeof chromep.storage.local\n): Promise<Array<Object>> {\n  const storage = await storageArea.get();\n\n  const snoozedTabs = [];\n  const tabsCount: number = storage.tabsCount || 0;\n\n  if (tabsCount) {\n    for (let i = 0; i < tabsCount; i++)\n      snoozedTabs.push(storage['tab' + i]);\n  }\n\n  return snoozedTabs;\n}\n\n/**\n * Read old tabs from sync storage and save them in local storage\n */\nasync function migrateOldSnoozedTabsObjects() {\n  let { snoozedTabs } = await chromep.storage.local.get(\n    STORAGE_KEY_SNOOZED_TABS\n  );\n\n  snoozedTabs = snoozedTabs || [];\n\n  // if already migrated, stop migration\n  // if (snoozedTabs != null) {\n  //   return;\n  // }\n\n  // Some tabs have null urls...  no reason why, ignore them\n  snoozedTabs = snoozedTabs.filter(tab => tab.url != null);\n\n  snoozedTabs.forEach(tab => {\n    // migrate old todo page to new one\n    migrateTodoPage(tab);\n\n    // migrate period.time ==> period.hour\n    if (tab.period != null && tab.period.time != null) {\n      tab.period.hour = tab.period.time;\n      delete tab.period.time;\n    }\n\n    // DIDN'T migrate tab.snoozeOptionIndex (number) => to tab.type (String)\n  });\n\n  await chromep.storage.local.set({\n    [STORAGE_KEY_SNOOZED_TABS]: snoozedTabs,\n  });\n}\n\nfunction migrateTodoPage(tab) {\n  const { url } = tab;\n\n  if (\n    url.includes('/todo.html') &&\n    url.includes('bg=') &&\n    url.includes('title=')\n  ) {\n    const oldTodoParams = qs.parse(\n      url.substring(url.indexOf('?') + 1)\n    );\n    const newTodoUrl =\n      chrome.runtime.getURL(APP_BASE_PATH + TODO_PATH) +\n      '?' +\n      qs.stringify({\n        text: oldTodoParams.title,\n        color: oldTodoParams.bg,\n      });\n\n    tab.url = newTodoUrl;\n    tab.favicon = TODO_COLORS[parseInt(oldTodoParams.bg)].favicon;\n  }\n}\n","// @flow\nimport migration000 from './migrations/migration000';\nimport chromep from 'chrome-promise';\n\nconst migrations = [migration000];\n\nexport const STORAGE_KEY_SETTINGS = 'lastMigrationIndex';\n\nexport async function performMigrations() {\n  let { lastMigrationIndex } = await chromep.storage.local.get(\n    STORAGE_KEY_SETTINGS\n  );\n\n  lastMigrationIndex =\n    lastMigrationIndex != null ? lastMigrationIndex : -1;\n\n  console.log(`Current migration status is: ${lastMigrationIndex}`);\n\n  for (let i = lastMigrationIndex + 1; i < migrations.length; i++) {\n    const migrate = migrations[i];\n\n    try {\n      console.log(`Performing migration ${i}`);\n      await migrate();\n      await chromep.storage.local.set({ [STORAGE_KEY_SETTINGS]: i });\n    } catch (error) {\n      console.error(`Failed to perform migration ${i}`);\n      throw error;\n    }\n  }\n}\n\nwindow.tabSnoozeDebug_performMigrations = performMigrations;\n","// @flow\n/**\n * This script is executed only as a Chrome Extensions\n * Background Page - a page that opens in the background\n * without a view.\n */\nimport { repeatLastSnooze } from './snooze';\nimport {\n  registerEventListeners as registerWakeupEventListeners,\n  scheduleWakeupAlarm,\n} from './wakeup';\nimport {\n  TODO_PATH,\n  SLEEPING_TABS_PATH,\n  CHANGELOG_URL,\n  getTrackUninstallUrl,\n  TUTORIAL_PATH,\n} from '../paths';\nimport {\n  COMMAND_NEW_TODO,\n  COMMAND_REPEAT_LAST_SNOOZE,\n  COMMAND_OPEN_SLEEPING_TABS,\n} from './commands';\nimport { createTab, IS_BETA, APP_VERSION } from './utils';\nimport { track, EVENTS } from './analytics';\nimport chromep from 'chrome-promise';\nimport { performMigrations } from './migrationManager';\nimport {\n  updateBadge,\n  registerEventListeners as registerBadgeEventListeners,\n} from './badge';\nimport { saveSettings } from './settings';\n\n// Adding chrome manually to global scope, for ESLint\nconst chrome = window.chrome;\n\n/**\n * runBackgroundScript() is called by index.js on the main thread of a Chrome Extension\n * Background script. In a Chrome Extension 'backgroud.js' script, all we are allowed to do is\n * register chrome API Event Listeners **synchroneously**, and *NO other logic*.\n * So no \"await (X) and then chrome.register()\". This function should be entirely sync,\n * and do no work besides registering event listeners (no storage reading etc.).\n *\n * If you wanna write a \"main()\" function for the extension, that runs real business logic, it\n * oddly enough should either be called in chrome.runtime.onInstall handler (which includes both extension\n * install and update), OR chrome.runtime.onStartup handler (which is ran on Chrome startup/update only.)\n * So the main logic should be ran on both of these triggers, and always only one of them is ran\n * and not the other, depends on the case... THANK YOU CHROME for making it hard on us.\n */\nexport function runBackgroundScript() {\n  // Make the main function run on Chrome startup\n  chrome.runtime.onStartup.addListener(extensionMain);\n\n  // [1] Register more background events by the wakeup module (synchroneously)\n  registerWakeupEventListeners();\n\n  // Make badge module listen to storage changes and update badge\n  registerBadgeEventListeners();\n\n  // Show CHANGELOG doc when extension updates\n  chrome.runtime.onInstalled.addListener(async function({\n    reason,\n    previousVersion,\n  }) {\n    // [2] Make the main function run on Extension install/update\n    await extensionMain();\n\n    chrome.runtime.setUninstallURL(getTrackUninstallUrl());\n\n    if (reason === 'install') {\n      track(EVENTS.EXT_INSTALLED);\n\n      // Save install date for new users.\n      // Old users will have a 0 install date\n      await saveSettings({\n        installDate: Date.now(),\n      });\n\n      createTab(TUTORIAL_PATH);\n    }\n\n    if (reason === 'update') {\n      track(EVENTS.EXT_UPDATED);\n\n      // Open the changelog every version update for beta testers\n      if (IS_BETA) {\n        notifyAboutNewBetaVersion();\n      }\n    }\n  });\n\n  chrome.commands.onCommand.addListener(command => {\n    // create a new todo window!, and focus on it\n    if (command === COMMAND_NEW_TODO) {\n      createTab(TODO_PATH);\n    }\n\n    if (command === COMMAND_REPEAT_LAST_SNOOZE) {\n      repeatLastSnooze();\n    }\n\n    if (command === COMMAND_OPEN_SLEEPING_TABS) {\n      createTab(SLEEPING_TABS_PATH);\n    }\n  });\n}\n\nasync function extensionMain() {\n  /**\n   * Run pending migrations!\n   * Note: onStartup is garanteed to be called, while onInstalled (update/install)\n   * isn't. So we perform critical stuff here, like storage migration, as we\n   * are certain it will be called **first thing** after an update.\n   */\n  await performMigrations();\n\n  // Set 1 mintue delay for Chrome to load after startup before\n  // waking up tabs so chrome is not stuck\n  await scheduleWakeupAlarm('1min');\n\n  // update badge after chrome startup\n  await updateBadge();\n\n  // Uncomment for Debug:\n  // require('../components/dialogs/FirstSnoozeDialog').default.open();\n}\n\nasync function notifyAboutNewBetaVersion() {\n  const notificationId = await chromep.notifications.create('', {\n    type: 'basic',\n    title: `Tab Snooze ${APP_VERSION} installed`,\n    message: 'Click to open the changelog',\n    iconUrl: '/images/beta_extension_icon_128.png',\n    requireInteraction: true,\n  });\n\n  // If notification clicked, open changelog\n  chrome.notifications.onClicked.addListener(\n    async function makeTabActive(notifId) {\n      if (notifId === notificationId) {\n        createTab(CHANGELOG_URL);\n\n        chrome.notifications.clear(notificationId);\n        chrome.notifications.onClicked.removeListener(makeTabActive);\n      }\n    }\n  );\n}\n","// @flow\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { runBackgroundScript } from './core/backgroundMain';\nimport { isBackgroundScript } from './core/utils';\nimport { ErrorBoundary } from './bugsnag';\n\nif (isBackgroundScript()) {\n  runBackgroundScript();\n} else {\n  const rootEl = document.getElementById('root');\n  rootEl.style.width = \"max-content\";\n\n  if (!rootEl) {\n    throw new Error('React root element is missing');\n  }\n\n  ReactDOM.render(\n    <ErrorBoundary>\n      <App />\n    </ErrorBoundary>,\n    rootEl\n  );\n}\n","// @flow\nimport { getSettings, saveSettings } from './settings';\nimport moment from 'moment';\n\n// export const IS_PRO_PRODUCT_VISIBLE = true;\nexport const FREE_WEEKLY_SNOOZE_COUNT = 20;\n\nexport async function isProUser() {\n  return true;\n  // const settings = await getSettings();\n\n  // // All beta users are PRO users\n  // // if (IS_BETA) {\n  // //   return true;\n  // // }\n\n  // // If user is new (After 15 Jan 2019)\n  // if (settings.installDate > 0) {\n  //   // if user is in test group\n  //   const isInProTestGroup = await isInProProductTest(\n  //     settings.installDate\n  //   );\n\n  //   // if user is in test group, they are not pro\n  //   return !isInProTestGroup;\n  // } else {\n  //   // All old users are Pro users for the moment\n  //   return true;\n  // }\n}\n\n// async function isInProProductTest(\n//   installDate: number\n// ): Promise<boolean> {\n//   return true;\n// }\n\nexport async function isInPaywallTest(): Promise<boolean> {\n  // const { installDate } = await getSettings();\n\n  // REMOVED FAKE PAYWALL :( 20 May...\n  return false;\n\n  // All users past March 2019 are in this test, and will see the paywall\n  // return moment(installDate) > moment('20190301', 'YYYYMMDD');\n}\n\nexport async function incrementWeeklyUsage(): Promise<void> {\n  const { weeklyUsage } = await getSettings();\n  let weeklyUsageCount = weeklyUsage.usageCount;\n\n  if (weeklyUsage.weekNumber !== moment().week()) {\n    weeklyUsageCount = 0;\n  }\n\n  weeklyUsageCount++;\n\n  return saveSettings({\n    weeklyUsage: {\n      weekNumber: moment().week(),\n      usageCount: weeklyUsageCount,\n    },\n  });\n}\n\nexport async function isOverFreeWeeklyQuota(): Promise<boolean> {\n  const { weeklyUsage } = await getSettings();\n  let weeklyUsageCount = weeklyUsage.usageCount;\n  const isInPaywallTestResult = await isInPaywallTest();\n\n  if (!isInPaywallTestResult) {\n    return false; // never over quota\n  }\n\n  if (weeklyUsage.weekNumber !== moment().week()) {\n    weeklyUsageCount = 0;\n  }\n\n  return weeklyUsageCount >= FREE_WEEKLY_SNOOZE_COUNT;\n}\n","// @flow\nimport { getSnoozedTabs, saveSnoozedTabs } from './storage';\nimport {\n  getActiveTab,\n  calcNextOccurrenceForPeriod,\n  getRecentlySnoozedTab,\n  createCenteredWindow,\n} from './utils';\nimport { trackTabSnooze, track, EVENTS } from './analytics';\nimport { getSettings, saveSettings } from './settings';\nimport { scheduleWakeupAlarm } from './wakeup';\nimport chromep from 'chrome-promise';\nimport { FIRST_SNOOZE_PATH, RATE_TS_PATH } from '../paths';\nimport { incrementWeeklyUsage } from './license';\n\nexport async function snoozeTab(\n  tab: ChromeTab,\n  config: SnoozeConfig\n) {\n  let { wakeupTime, period, type, closeTab = true } = config;\n\n  if (period) {\n    const nextOccurrenceDate = calcNextOccurrenceForPeriod(period);\n    wakeupTime = nextOccurrenceDate.getTime();\n  }\n\n  if (!wakeupTime) {\n    throw new Error('No wakeup date and no period given');\n  }\n\n  // Uncomment for debugging only:\n  // wakeupTime = Date.now() + 1000 * 10;\n\n  console.log(\n    'Snoozing tab until ' + new Date(wakeupTime).toString()\n  );\n\n  // The info to store about this tab\n  const snoozedTab: SnoozedTab = {\n    url: tab.url,\n    title: tab.title,\n    favicon: tab.favIconUrl,\n    type,\n    sleepStart: Date.now(),\n    period,\n    when: wakeupTime, // convert to number since storage can't handle Date\n  };\n\n  // Store & persist snoozed tab for later\n  const snoozedTabs = await getSnoozedTabs();\n  snoozedTabs.push(snoozedTab);\n  await saveSnoozedTabs(snoozedTabs);\n\n  // Schedule a wake-up for the Chrome extension on snoozed time\n  await scheduleWakeupAlarm('auto');\n\n  // usage tracking\n  trackTabSnooze(snoozedTab);\n\n  let { totalSnoozeCount } = await getSettings();\n  totalSnoozeCount++;\n\n  await saveSettings({\n    totalSnoozeCount,\n  });\n\n  await incrementWeeklyUsage();\n\n  // open share / rate dialog\n  if (totalSnoozeCount === 1) {\n    createCenteredWindow(FIRST_SNOOZE_PATH, 830, 485);\n  }\n\n  if (totalSnoozeCount === 10) {\n    createCenteredWindow(RATE_TS_PATH, 500, 540);\n  }\n\n  // ORDER MATTERS!  Closing a tab will close the snooze popup, and might terminate\n  // the flow of this code before finish. so close tab at the end.\n  if (closeTab) {\n    chromep.tabs.remove(tab.id);\n  }\n\n  // Add tab to history\n  //   addTabToHistory(snoozedTabInfo, onAddedToHistory);\n}\n\nexport async function snoozeActiveTab(config: SnoozeConfig) {\n  const activeTab = await getActiveTab();\n  return snoozeTab(activeTab, config);\n}\n\nexport async function repeatLastSnooze() {\n  const snoozedTabs = await getSnoozedTabs();\n  const lastSnooze = getRecentlySnoozedTab(snoozedTabs);\n\n  // ignore \"Repeat snooze\" if no last snooze,\n  // or last snooze was more than 10 minutes ago\n  if (\n    !lastSnooze ||\n    Date.now() - lastSnooze.sleepStart > 1000 * 60 * 10\n  ) {\n    return;\n  }\n\n  track(EVENTS.REPEAT_SNOOZE);\n\n  return snoozeActiveTab({\n    wakeupTime: lastSnooze.period ? undefined : lastSnooze.when,\n    period: lastSnooze.period,\n    type: lastSnooze.type,\n  });\n}\n\nexport async function resnoozePeriodicTab(snoozedTab: SnoozedTab) {\n  if (!snoozedTab.period) {\n    throw new Error(\n      'resnoozePeriodicTab received a tab without a period'\n    );\n  }\n\n  // Update sleep end for the next date\n  let newWakeupDate = calcNextOccurrenceForPeriod(snoozedTab.period);\n\n  console.log('Re-snoozing tab until ' + newWakeupDate.toString());\n\n  snoozedTab.when = newWakeupDate.getTime();\n\n  // Store & persist snoozed tab info for later\n  // Add our new tab\n  const snoozedTabs = await getSnoozedTabs();\n  snoozedTabs.push(snoozedTab);\n  await saveSnoozedTabs(snoozedTabs);\n\n  // Schedule next wakeup\n  await scheduleWakeupAlarm('auto');\n}\n","// @flow\nimport { getSnoozedTabs, saveSnoozedTabs } from './storage';\nimport chromep from 'chrome-promise';\nimport {\n  createTabs,\n  notifyUserAboutNewTabs,\n  addMinutes,\n  areTabsEqual,\n  getFirstTabToWakeup,\n} from './utils';\nimport { getSettings } from './settings';\nimport { playAudio, SOUND_NOTIFICATION } from './audio';\nimport { resnoozePeriodicTab } from './snooze';\nimport bugsnag from '../bugsnag';\n\n// Adding chrome manually to global scope, for ESLint\nconst chrome = window.chrome;\n\nconst WAKEUP_TABS_ALARM_NAME = 'WAKEUP_TABS_ALARM';\n\n/*\n    This timestamp prevents several alarms from going off at the same\n    time and cause tabs to be woken up more than once because of a \n    asynchrouneous nature of storage.get/set.\n    when alarm goes off, it sets this timestamp to a minute from now, to\n    mark that it handles waking up tabs in the next minute.\n*/\nlet wakeupThreshold = new Date(0);\n\n/*\n    Delete tabs from storage\n*/\nexport async function deleteSnoozedTabs(\n  tabsToDelete: Array<SnoozedTab>\n): Promise<void> {\n  const snoozedTabs = await getSnoozedTabs();\n\n  // Is given tab marked for deletion?\n  const shouldDeleteTab = tab =>\n    tabsToDelete.find(tabToDelete =>\n      areTabsEqual(tabToDelete, tab)\n    ) != null;\n\n  const newSnoozedTabs = snoozedTabs.filter(\n    tab => !shouldDeleteTab(tab)\n  );\n\n  await saveSnoozedTabs(newSnoozedTabs);\n\n  // reschedule alarm\n  await scheduleWakeupAlarm('auto');\n}\n\n/*\n    Create tabs, notify user, and delete from storage\n*/\nexport async function wakeupTabs(\n  tabsToWakeUp: Array<SnoozedTab>,\n  makeActive: boolean\n): Promise<Array<ChromeTab>> {\n  console.log(`Waking up ${tabsToWakeUp.length} tabs`);\n\n  // delete waking tabs from storage\n  await deleteSnoozedTabs(tabsToWakeUp);\n\n  // Reschedule repeated tabs, if any\n  const periodicTabs = tabsToWakeUp.filter(tab => tab.period);\n  for (let tab of periodicTabs) {\n    await resnoozePeriodicTab(tab);\n  }\n\n  // schedule wakeup for next tabs in list\n  await scheduleWakeupAlarm('auto');\n\n  // re-create tabs\n  const createdTabs = await createTabs(tabsToWakeUp, makeActive);\n\n  return createdTabs;\n}\n\nexport async function wakeupReadyTabs() {\n  const settings = await getSettings();\n  let snoozedTabs = await getSnoozedTabs();\n  let now = new Date();\n\n  // check if tabs for right now already awoken by other alarm.\n  if (now <= wakeupThreshold) {\n    return;\n  }\n\n  // ****** Fixing a bug in production ***** //\n  // ****** THIS SHOULD NOT HAPPEN ***** //\n  // ****** THIS SHOULD NOT HAPPEN ***** //\n  // ****** THIS SHOULD NOT HAPPEN ***** //\n  if (snoozedTabs.findIndex(tab => !tab) !== -1) {\n    bugsnag.notify(new Error('Found null in snoozedTabs'), {\n      metaData: {\n        storage: {\n          snoozedTabs,\n        },\n      },\n    });\n\n    // TEMP FIX, remove null tabs\n    snoozedTabs = snoozedTabs.filter(tab => tab);\n  }\n\n  // set wakeupThreshold to a minute in the future to include\n  // nearby snoozed tabs.\n  wakeupThreshold = addMinutes(now, 1);\n\n  let readySleepingTabs = snoozedTabs.filter(\n    snoozedTab => new Date(snoozedTab.when) <= wakeupThreshold\n  );\n\n  if (readySleepingTabs.length > 0) {\n    // create inactive tabs & notify user\n    const createdTabs = await wakeupTabs(readySleepingTabs, false);\n\n    // Notify user\n    if (settings.showNotifications) {\n      // Show desktop notification\n      notifyUserAboutNewTabs(readySleepingTabs, createdTabs[0]);\n    }\n\n    if (settings.playNotificationSound) {\n      playAudio(SOUND_NOTIFICATION);\n    }\n  }\n}\n\n/*\n    Clear all existing alarms and reschedule new alarms\n    based on current snoozedTabs array.\n*/\nexport async function scheduleWakeupAlarm(when: 'auto' | '1min') {\n  await cancelWakeupAlarm();\n\n  const snoozedTabs = await getSnoozedTabs();\n  let alarmTime = 0;\n\n  if (snoozedTabs.length === 0) {\n    return;\n  }\n\n  if (when === 'auto') {\n    // Automatically find earliest tab ready to wake up\n    const nextTabToWakeup = getFirstTabToWakeup(snoozedTabs);\n\n    alarmTime = nextTabToWakeup.when;\n  } else {\n    // when === '1min'\n    alarmTime = Date.now() + 1000 * 60;\n  }\n\n  chrome.alarms.create(WAKEUP_TABS_ALARM_NAME, {\n    when: alarmTime,\n  });\n}\n\nexport function cancelWakeupAlarm(): Promise<void> {\n  return chromep.alarms.clear(WAKEUP_TABS_ALARM_NAME);\n}\n\n/**\n * Init the automatic wake up methods\n */\nexport function registerEventListeners() {\n  // Wake up tabs on scheduled dates\n  chrome.alarms.onAlarm.addListener(async function(alarm) {\n    if (alarm.name === WAKEUP_TABS_ALARM_NAME) {\n      console.log('Alarm fired - waking up ready tabs');\n\n      // wake up ready tabs, if any\n      await wakeupReadyTabs();\n\n      // Schedule wakeup for next tabs\n      await scheduleWakeupAlarm('auto');\n    }\n  });\n\n  /*\n    After computer sleeps and then wakes, for some reason\n    the alarms are not called, so we use idle detection to\n    get the callback when system wakes up.\n  */\n  chrome.idle.onStateChanged.addListener(newState => {\n    if (newState === 'active') {\n      console.log('System active after idle time');\n\n      // Give 1 mintue for Wifi to connect after login,\n      // otherwise created tabs will fail to connect and break\n      scheduleWakeupAlarm('1min');\n    } else {\n      // To avoid waking up a tab during sleep, or immedietly on computer\n      // wake up from sleep (active state), we turn off alarms, so that\n      // chrome will have time to sync data before waking up a tab twice excidently.\n      console.log('System idle - Turning off all alarms.');\n\n      cancelWakeupAlarm();\n    }\n  });\n\n  // onStorage\n  // chrome.storage.onChanged.addListener(() =>\n  //   scheduleWakeupAlarm('auto')\n  // );\n}\n","// @flow\nimport { getSettings } from './settings';\nimport bugsnag from '../bugsnag';\n\n// export const SOUND_TAB_SNOOZE1 = 'sounds/snooze1.mp3';\n// export const SOUND_TAB_SNOOZE2 = 'sounds/snooze2.mp3';\n// export const SOUND_TAB_SNOOZE3 = 'sounds/snooze3.mp3';\nexport const SOUND_TAB_SNOOZE1 = 'sounds/snooze.m4a';\nexport const SOUND_TAB_SNOOZE2 = 'sounds/snooze.m4a';\nexport const SOUND_TAB_SNOOZE3 = 'sounds/snooze.m4a';\nexport const SOUND_NOTIFICATION = 'sounds/wakeup_notification.mp3';\n\nlet playSoundEffects = true;\ngetSettings().then(\n  settings => (playSoundEffects = settings.playSoundEffects)\n);\n\nexport function loadAudio(sound: string): HTMLAudioElement {\n  const audio = new window.Audio();\n  audio.src = sound;\n  audio.preload = 'auto';\n\n  // lower volume to we don't annoy user\n  audio.volume = 0.5;\n\n  return audio;\n}\n\nexport function loadSoundEffect(sound: string): HTMLAudioElement {\n  if (playSoundEffects) {\n    return loadAudio(sound);\n  } else {\n    // return dummy stub func\n    return new window.Audio();\n  }\n}\n\nexport function playAudio(sound: string) {\n  if (playSoundEffects) {\n    try {\n      loadAudio(sound).play();\n    } catch (err) {\n      bugsnag.notify(err);\n    }\n  }\n}\n","// @flow\nimport { getSnoozedTabs } from './storage';\nimport { styledComponentsTheme } from '../theme';\nimport { getSettings } from './settings';\nimport moment from 'moment';\n\n// Adding chrome manually to global scope, for ESLint\nconst chrome = window.chrome;\n\nexport const BADGE_HIDDEN = 'hidden';\nexport const BADGE_DUE_TODAY = 'due_today';\nexport const BADGE_TOTAL_SNOOZED = 'total_snoozed';\n\nexport function registerEventListeners() {\n  // Update badge (visible/hidden + count) on any storage change (tabs snoozed/awoken)\n  chrome.storage.onChanged.addListener(updateBadge);\n\n  // in case badge is BADGE_DUE_TODAY, make sure to update the badge\n  // from time to time when days pass, but storage does not change\n  chrome.idle.onStateChanged.addListener(updateBadge);\n}\n\n/*\n    Update the Browser Action button badge count of snoozed tabs\n*/\nexport async function updateBadge() {\n  // dont show '0', remove badge with empty string;\n  const snoozedTabs = await getSnoozedTabs();\n  const { badge } = await getSettings();\n\n  let snoozedCount;\n\n  if (badge === BADGE_HIDDEN) {\n    snoozedCount = '';\n  } else if (badge === BADGE_DUE_TODAY) {\n    snoozedCount = snoozedTabs.filter(\n      tab => moment(tab.when) < moment().endOf('day')\n    ).length;\n  } else {\n    snoozedCount = snoozedTabs.length;\n  }\n\n  // if count is 0, show no badge\n  if (snoozedCount === 0) {\n    snoozedCount = '';\n  }\n\n  chrome.browserAction.setBadgeBackgroundColor({\n    color: styledComponentsTheme.primary,\n  });\n\n  chrome.browserAction.setBadgeText({ text: '' + snoozedCount });\n}\n","import { createMuiTheme } from '@material-ui/core/styles';\n\n// Styled Components theme (passed via context to prop.theme)\n// export const styledComponentsTheme = {\n// dark: true,\n\n//   // colors\n//   primary: '#4DCAF2',\n//   black: '#4A4A4A',\n//   gray: '#7F7F7F',\n\n//   beta: '#FF5939',\n\n//   // ui\n//   border: '#DADADA',\n//   lightBorder: '#ECECEC',\n\n//   // font\n//   fontFamily: `\"Roboto\", \"Helvetica Neue\", Arial, sans-serif`,\n\n//   // snooze panel\n//   snoozePanel: {\n//     bgColor: '#373533',\n//     border: '#4B4947',\n//     hoverColor: '#403E3C',\n//     footerTextColor: '#f0f0f0',\n//     buttonTextColor: '#f4f4f4',\n//     countBadgeColor: '#f0f0f0',\n//     whiteIcons: true,\n//   },\n// };\nexport const styledComponentsTheme = {\n\n  dark: false,\n\n  // colors\n  primary: '#4DCAF2',\n  black: '#4A4A4A',\n  gray: '#7F7F7F',\n\n  beta: '#FF5939',\n\n  // ui\n  border: '#DADADA',\n  lightBorder: '#ECECEC',\n\n  // font\n  fontFamily: `\"Roboto\", \"Helvetica Neue\", Arial, sans-serif`,\n\n  // snooze panel\n  snoozePanel: {\n    bgColor: '#fff',\n    border: '#e5e9e9',\n    hoverColor: '#f5f8f8',\n    footerTextColor: '#888888', //  / '#929292',\n    buttonTextColor: '#788284',\n    countBadgeColor: '#929292',\n    whiteIcons: false\n  },\n};\n\n// Material UI Theme\nexport const muiTheme = createMuiTheme({\n  palette: {\n    primary: { main: '#21c1f4' }, // styledComponentsTheme.primary\n    // secondary: green,\n  },\n  ripple: {\n    color: '#fff',\n  },\n  typography: {\n    useNextVariants: true,\n\n    // Tell Material-UI what's the font-size on the html element is.\n    htmlFontSize: 10,\n  },\n\n  overrides: {\n    // ripple: {\n    //   color: '#fff',\n    // },\n    // Name of the component ⚛️ / style sheet\n    MuiToolbar: {\n      root: {\n        height: 68,\n      },\n    },\n\n    MuiButton: {\n      root: {\n        color: 'white',\n      },\n    },\n  },\n});\n","// @flow\n// import type { Moment } from 'moment';\nimport moment from 'moment';\n\nexport const SNOOZE_TYPE_REPEATED = 'periodically';\nexport const SNOOZE_TYPE_SPECIFIC_DATE = 'specific_date';\n\nexport type SnoozeOption = {\n  id: string,\n  title: string,\n  icon: string,\n  activeIcon: string,\n  tooltip: string,\n  when?: Date,\n  isProFeature?: boolean,\n};\n\nexport default function calcSnoozeOptions(\n  settings: Settings\n): Array<SnoozeOption> {\n  // constants from user settings\n  const {\n    workdayEnd,\n    weekStartDay,\n    weekEndDay,\n    workdayStart,\n    laterTodayHoursDelta,\n    somedayMonthsDelta,\n  } = settings;\n\n  const isVeryLateAtNight = moment().hour() <= 3;\n  const isNightTime =\n    moment().hour() >= workdayEnd || moment().hour() < 3;\n  const isWeekend =\n    moment().day() === weekEndDay ||\n    moment().day() === (weekEndDay + 1) % 7;\n\n  const roundDate = momentDate =>\n    momentDate\n      .minutes(0)\n      .seconds(0)\n      .millisecond(0);\n\n  const dayStart = momentDate =>\n    roundDate(momentDate.hour(workdayStart));\n\n  const laterTodayTime = moment().add(laterTodayHoursDelta, 'hours');\n  const thisEveningTime = roundDate(\n    moment().hour() >= workdayEnd\n      ? moment()\n          .add(1, 'day')\n          .hour(workdayEnd)\n      : moment().hour(workdayEnd)\n  );\n  const tomorrowTime = isVeryLateAtNight\n    ? dayStart(moment()) // if its very late, tomorrow = today.\n    : dayStart(moment().add(1, 'days'));\n  const weekendTime = isWeekend\n    ? dayStart(moment().day(7 + weekEndDay)) // choose next weekend\n    : dayStart(moment().day(weekEndDay));\n  const nextWeekTime = dayStart(moment().day(weekStartDay + 7)); // next day which start the week\n  const inAMonthTime = dayStart(moment().add(1, 'months'));\n  const somedayTime = dayStart(\n    moment().add(somedayMonthsDelta, 'months')\n  );\n\n  return [\n    {\n      id: 'later',\n      title: 'Later Today',\n      icon: require('./icons/coffee.svg'),\n      activeIcon: require('./icons/coffee_white.svg'),\n      tooltip: `${laterTodayTime.calendar()} (${laterTodayHoursDelta} hours from now)`,\n      when: laterTodayTime.toDate(),\n    },\n    {\n      id: 'evening',\n      title: isNightTime ? 'Tomorrow Eve' : 'This Evening',\n      icon: require('./icons/moon.svg'),\n      activeIcon: require('./icons/moon_white.svg'),\n      tooltip: thisEveningTime.calendar(),\n      when: thisEveningTime.toDate(),\n    },\n    {\n      id: 'tomorrow',\n      title: 'Tomorrow',\n      icon: require('./icons/sun.svg'),\n      activeIcon: require('./icons/sun_white.svg'),\n      tooltip: tomorrowTime.calendar(),\n      when: tomorrowTime.toDate(),\n    },\n    {\n      id: 'weekend',\n      title: isWeekend ? 'Next Weekend' : 'This Weekend',\n      icon: require('./icons/soffa.svg'),\n      activeIcon: require('./icons/soffa_white.svg'),\n      tooltip: weekendTime.calendar(),\n      when: weekendTime.toDate(),\n    },\n    {\n      id: 'next_week',\n      title: 'Next Week',\n      icon: require('./icons/breifcase.svg'),\n      activeIcon: require('./icons/breifcase_white.svg'),\n      tooltip: nextWeekTime.calendar(),\n      when: nextWeekTime.toDate(),\n    },\n    {\n      id: 'in_a_month',\n      title: 'In a Month',\n      icon: require('./icons/mailbox.svg'),\n      activeIcon: require('./icons/mailbox_white.svg'),\n      tooltip: inAMonthTime.format('LL'),\n      when: inAMonthTime.toDate(),\n    },\n    {\n      id: 'someday',\n      title: 'Someday',\n      icon: require('./icons/pine.svg'),\n      activeIcon: require('./icons/pine_white.svg'),\n      tooltip: `${somedayTime.format(\n        'LL'\n      )} (${somedayMonthsDelta} months from now)`,\n      when: somedayTime.toDate(),\n    },\n    {\n      id: SNOOZE_TYPE_REPEATED,\n      title: 'Repeatedly',\n      icon: require('./icons/refresh.svg'),\n      activeIcon: require('./icons/refresh_white.svg'),\n      tooltip: 'Open this tab on a periodic basis',\n      isProFeature: true,\n    },\n    {\n      id: SNOOZE_TYPE_SPECIFIC_DATE,\n      title: 'Pick a Date',\n      icon: require('./icons/calendar.svg'),\n      activeIcon: require('./icons/calendar_white.svg'),\n      tooltip: 'Select a specific date & time',\n    },\n  ];\n}\n","// @flow\nimport React from 'react';\nimport styled from 'styled-components';\n\nexport default (props: { white: boolean }) => (\n  <Ribbon white={props.white}>PRO</Ribbon>\n);\n\nconst Ribbon = styled.div`\n  width: 90px;\n  transition: background-color 0.4s;\n  background: ${props => (props.white ? '#fff' : (props.theme.dark ? '#fff' : '#CCD0D0'))};\n  position: absolute;\n  text-align: center;\n  line-height: 21px;\n  font-size: 16px;\n  font-weight: 700;\n  color: ${props => props.white ? props.theme.primary : props.theme.snoozePanel.bgColor};\n\n  top: 12px;\n  right: -22px;\n  left: auto;\n  transform: rotate(45deg);\n`;\n","// @flow\nimport React, { Component } from 'react';\nimport styled, { css, withTheme } from 'styled-components';\nimport ProCornerRibbon from './ProCornerRibbon';\nimport Collapse from '@material-ui/core/Collapse';\n\nexport type Props = {\n  id: string,\n  title: string,\n  icon: string,\n  activeIcon: string,\n  focused: boolean,\n  pressed: boolean,\n  proBadge: boolean,\n  onClick: Event => void,\n  onMouseEnter: () => void,\n  onMouseLeave: () => void,\n\n  // passed by withTheme:\n  theme?: Object,\n};\n\nconst SNOOZE_CLICK_EFFECT_TIME = 400;\n\nclass SnoozeButton extends Component<Props> {\n  defaultProps: {\n    theme: {},\n  };\n\n  render() {\n    const {\n      title,\n      icon,\n      activeIcon,\n      focused,\n      pressed,\n      proBadge,\n      onClick,\n      onMouseLeave,\n      onMouseEnter,\n      theme,\n    } = this.props;\n\n    return (\n      <Button\n        pressed={pressed}\n        focused={focused}\n        onMouseDown={onClick}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n      >\n        <IconWrapper>\n          <Icon src={activeIcon} />\n          {theme && !theme.snoozePanel.whiteIcons && (\n            <OverlayIcon src={icon} hide={pressed} />\n          )}\n        </IconWrapper>\n        <Collapse in={!pressed} timeout={SNOOZE_CLICK_EFFECT_TIME}>\n          <Title pressed={pressed}>{title}</Title>\n        </Collapse>\n        {proBadge && <ProCornerRibbon white={pressed} />}\n      </Button>\n    );\n  }\n}\n\nexport default withTheme(SnoozeButton);\n\nconst Button = styled.button`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n\n  border: none;\n  cursor: pointer;\n  outline: inherit;\n  background-color: ${props => props.theme.snoozePanel.bgColor};\n\n  /* Hide ribbon edges */\n  overflow: hidden;\n\n  transition: background-color 0.1s;\n  :hover {\n    background-color: ${props => props.theme.snoozePanel.hoverColor};\n  }\n  ${props =>\n    props.focused &&\n    css`\n      background-color: ${props =>\n        props.theme.snoozePanel.hoverColor};\n    `}\n\n  ${props =>\n    props.pressed &&\n    css`\n      /* To add transition, u need to transition the image too */\n      transition: background-color ${SNOOZE_CLICK_EFFECT_TIME}ms;\n      background-color: ${props.theme.primary} !important;\n      ${Icon} {\n        transform: scale(1.3);\n      }\n    `};\n`;\n\nconst IconWrapper = styled.div`\n  position: relative;\n`;\n\nconst Icon = styled.img`\n  transition: all ${SNOOZE_CLICK_EFFECT_TIME}ms;\n  opacity: ${props => (props.hide ? 0 : 1)};\n`;\n\nconst OverlayIcon = styled(Icon)`\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n`;\n\nconst Title = styled.div`\n  margin-top: 12px;\n  font-size: 15px;\n  color: ${props => props.theme.snoozePanel.buttonTextColor};\n  font-weight: 500;\n  transition: color ${SNOOZE_CLICK_EFFECT_TIME}ms;\n  /* height: 16px; */\n\n  ${props =>\n    props.pressed &&\n    css`\n      color: #fff;\n      /* height: 0; */\n      /* overflow: hidden; */\n      /* margin: 0; */\n    `};\n`;\n","// @flow\nimport type { Props as SnoozeButtonProps } from './SnoozeButton';\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport SnoozeButton from './SnoozeButton';\n\ntype Props = {\n  buttons: Array<SnoozeButtonProps>,\n};\n\nexport default class SnoozeButtonsGrid extends Component<Props> {\n  render() {\n    const { buttons } = this.props;\n    return (\n      <ButtonsGrid>\n        {buttons.map(button => (\n          <SnoozeButton key={button.id} {...button} />\n        ))}\n      </ButtonsGrid>\n    );\n  }\n}\n\nconst ButtonsGrid = styled.div`\n  display: grid;\n  grid-template-columns: 130px 130px 130px;\n  grid-template-rows: 130px 130px 130px;\n  justify-items: stretch;\n  align-items: stretch;\n  justify-content: stretch;\n  grid-gap: 1px;\n  background-color: ${props => props.theme.snoozePanel.border};\n`;\n","// @flow\nimport React, { Component } from 'react';\n\ntype Props = {};\ntype State = {\n  tooltipVisible: boolean,\n  tooltipText: ?string,\n};\n\nconst TOOLTIP_SHOW_TIMEOUT = 600;\nconst TOOLTIP_HIDE_TIMEOUT = 100;\n\nexport default (WrappedComponent: any) => {\n  class TooltipHelper extends Component<Props, State> {\n    // counts down until tooltip appears/hides\n    tooltipShowTimeout: ?TimeoutID = null;\n    tooltipHideTimeout: ?TimeoutID = null;\n\n    state = {\n      tooltipVisible: false,\n      tooltipText: null,\n    };\n\n    onTooltipAreaMouseEnter(tooltipText: string) {\n      const { tooltipVisible } = this.state;\n\n      this.setState({\n        tooltipText,\n      });\n\n      if (this.tooltipHideTimeout) {\n        clearTimeout(this.tooltipHideTimeout);\n      }\n\n      // if tooltip already visible\n      if (!tooltipVisible && !this.tooltipShowTimeout) {\n        this.tooltipShowTimeout = setTimeout(() => {\n          this.tooltipShowTimeout = null;\n          this.setState({ tooltipVisible: true });\n        }, TOOLTIP_SHOW_TIMEOUT);\n      }\n    }\n\n    onTooltipAreaMouseLeave() {\n      if (this.tooltipShowTimeout) {\n        clearTimeout(this.tooltipShowTimeout);\n        this.tooltipShowTimeout = null;\n        this.setState({ tooltipVisible: false });\n      }\n\n      this.tooltipHideTimeout = setTimeout(() => {\n        this.setState({ tooltipVisible: false });\n      }, TOOLTIP_HIDE_TIMEOUT);\n    }\n\n    preventTooltip() {\n      // Avoid showing tooltip after user already selected, its distructing\n      if (this.tooltipShowTimeout) {\n        clearTimeout(this.tooltipShowTimeout);\n      }\n    }\n\n    render() {\n      const { tooltipText, tooltipVisible } = this.state;\n\n      return (\n        <WrappedComponent\n          tooltipVisible={tooltipVisible}\n          tooltipText={tooltipText}\n          preventTooltip={this.preventTooltip.bind(this)}\n          onTooltipAreaMouseEnter={this.onTooltipAreaMouseEnter.bind(\n            this\n          )}\n          onTooltipAreaMouseLeave={this.onTooltipAreaMouseLeave.bind(\n            this\n          )}\n          {...this.props}\n        />\n      );\n    }\n  }\n\n  return TooltipHelper;\n};\n","// @flow\nimport React, { Component } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport SnoozeModal from './SnoozeModal';\nimport Button from './Button';\nimport { getUpgradeUrl } from '../../paths';\nimport ProBadge from '../OptionsPage/ProBadge';\nimport { FREE_WEEKLY_SNOOZE_COUNT } from '../../core/license';\n\ntype Props = {\n  visible: boolean,\n  onDismiss: void => void,\n};\ntype State = {\n  canContinue: boolean,\n};\n\n// Delay the user 7 seconds until they can continue without paying\nconst CONTINUE_DELAY = 6000;\n\nexport default class UpgradeDialog extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { canContinue: false };\n\n    setTimeout(() => {\n      this.setState({ canContinue: true });\n    }, CONTINUE_DELAY + 600);\n  }\n\n  render() {\n    const { visible, onDismiss } = this.props;\n    const { canContinue } = this.state;\n\n    return (\n      <SnoozeModal visible={visible}>\n        <Root>\n          <Star src={require('./images/super_star.svg')} />\n          <Title>\n            Become a Tab Snooze <ProBadge big /> !\n          </Title>\n          <Subtitle>\n            Help us support this extension development and enjoy\n            unlimited tab snoozing!\n            <br />\n            <br />\n            You have used your {FREE_WEEKLY_SNOOZE_COUNT} free weekly\n            snoozes.\n          </Subtitle>\n\n          <BuyButton\n            raised\n            as=\"a\"\n            href={getUpgradeUrl()}\n            target=\"_blank\"\n          >\n            Choose a Plan\n          </BuyButton>\n          <NoThanksButton\n            raised\n            onClick={onDismiss}\n            disabled={!canContinue}\n          >\n            Let me use one more time for free\n            <ProgressBar>\n              <Progress />\n            </ProgressBar>\n          </NoThanksButton>\n        </Root>\n      </SnoozeModal>\n    );\n  }\n}\n\nconst Root = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  /* justify-content: center; */\n  padding-top: 20px;\n`;\n\nconst Star = styled.img``;\n\nconst Title = styled.div`\n  margin-top: 20px;\n  font-weight: 500;\n  font-size: 26px;\n  color: #1f1f1f;\n  text-align: center;\n`;\nconst Subtitle = styled.div`\n  flex: 1;\n  margin-top: 15px;\n  font-size: 17px;\n  color: #7a7a7a;\n  text-align: center;\n  line-height: 24px;\n`;\n\nconst BuyButton = styled(Button)`\n  width: 100%;\n  margin-top: 10px;\n  text-align: center;\n`;\n\nconst NoThanksButton = styled(BuyButton).attrs({ color: '#E2E2E2' })`\n  color: #333333;\n  position: relative;\n  overflow: hidden;\n`;\n\nconst ProgressBar = styled.div`\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n`;\n\nconst horizontalShrink = keyframes`\n  from {\n    width: 100%;\n  }\n\n  to {\n    width: 0%;\n  }\n`;\n\nconst Progress = styled.div`\n  background-color: rgba(0, 0, 0, 0.1);\n  animation: ${horizontalShrink} ${CONTINUE_DELAY}ms linear 1;\n`;\n","// @flow\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CheckboxIcon from '@material-ui/icons/CheckBoxRounded';\nimport { Link } from 'react-router-dom';\nimport {\n  SLEEPING_TABS_PATH,\n  TODO_PATH,\n  SETTINGS_PATH,\n  getUpgradeUrl,\n  BETA_PATH,\n} from '../../paths';\nimport { getSnoozedTabs } from '../../core/storage';\nimport { createTab } from '../../core/utils';\n// import Tooltip from '@material-ui/core/Tooltip';\n\ntype Props = {\n  tooltip: {\n    visible: boolean,\n    text: ?string,\n  },\n  // show/hide pro badge\n  upgradeBadge: boolean,\n  betaBadge: boolean,\n};\ntype State = {\n  sleepingTabsCount: number,\n};\n\nexport default class SnoozeFooter extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      sleepingTabsCount: 0,\n    };\n\n    // Fetch sleeping tabs count from storage\n    getSnoozedTabs().then(snoozedTabs =>\n      this.setState({\n        sleepingTabsCount: snoozedTabs.length,\n      })\n    );\n  }\n\n  render() {\n    const { tooltip, upgradeBadge, betaBadge } = this.props;\n    const { sleepingTabsCount } = this.state;\n\n    return (\n      <Footer>\n        <Buttons>\n          <SleepingTabsBtn as={Link} to={SLEEPING_TABS_PATH}>\n            <SleepinCountBadge>{sleepingTabsCount}</SleepinCountBadge>\n            Sleeping Tabs\n          </SleepingTabsBtn>\n          {!betaBadge && upgradeBadge && (\n            <BadgeButton\n              as=\"a\"\n              href={getUpgradeUrl()}\n              target=\"_blank\"\n            >\n              <UpgradeBadge>Upgrade</UpgradeBadge>\n            </BadgeButton>\n          )}\n          {betaBadge && (\n            <BadgeButton\n              onClick={() => {\n                createTab(BETA_PATH);\n              }}\n            >\n              <BetaBadge>BETA</BetaBadge>\n            </BadgeButton>\n          )}\n          <IconBtn as={Link} to={TODO_PATH} target=\"_blank\">\n            <CheckboxIcon />\n          </IconBtn>\n          <IconBtn as={Link} to={SETTINGS_PATH} target=\"_blank\">\n            <SettingsIcon />\n          </IconBtn>\n        </Buttons>\n        <SnoozeTooltip visible={tooltip.visible}>\n          {tooltip.text}\n        </SnoozeTooltip>\n      </Footer>\n    );\n  }\n}\n\nconst Footer = styled.div`\n  display: flex;\n  justify-content: strech;\n  align-items: stretch;\n\n  height: 56px;\n  border-top: 1px solid ${props => props.theme.snoozePanel.border};\n  position: relative;\n`;\n\nconst SnoozeTooltip = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n\n  transition: opacity 0.5s;\n  opacity: ${props => (props.visible ? 1 : 0)};\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  background-color: ${props => props.theme.snoozePanel.bgColor};\n  color: ${props => props.theme.snoozePanel.footerTextColor};\n  /* font-weight: 500; */\n  font-size: 17px;\n`;\n\nconst Buttons = styled.div`\n  flex: 1;\n  display: flex;\n  align-items: stretch;\n`;\n\nconst TooltipButton = props => (\n  // <Tooltip title={'props.title'} placement=\"top\">\n  <button {...props} />\n  // </Tooltip>\n);\n\nconst FooterBtn = styled(TooltipButton)`\n  border: none;\n  cursor: pointer;\n  background-color: ${props => props.theme.snoozePanel.bgColor};\n  background-position: center;\n  background-repeat: no-repeat;\n  display: flex;\n  align-items: center;\n\n  :hover {\n    background-color: ${props => props.theme.snoozePanel.hoverColor};\n  }\n  :active {\n    background-color: ${props => props.theme.dark ? props.theme.black :'#d7e3e3'};\n  }\n`;\n\nconst SleepinCountBadge = styled.div`\n  background-color: ${props =>\n    props.theme.snoozePanel.countBadgeColor};\n  padding: 2px 8px;\n  border-radius: 5px;\n  color: ${props => props.theme.snoozePanel.bgColor};\n  font-weight: 700;\n  font-size: 15px;\n  margin-right: 11px;\n`;\n\nconst SleepingTabsBtn = styled(FooterBtn)`\n  display: flex;\n  align-items: center;\n  padding-left: 16px;\n\n  color: ${props => props.theme.snoozePanel.footerTextColor};\n  /* color: #929292; */\n  font-weight: 500;\n  font-size: 17px;\n  flex: 1;\n`;\n\nconst BadgeButton = styled(FooterBtn)`\n  padding: 0 14px;\n`;\n\nconst UpgradeBadge = styled.div`\n  background-color: ${props => props.theme.primary};\n  padding: 8px 10px;\n  border-radius: 5px;\n  color: #fff;\n  /* color: ${props => props.theme.snoozePanel.bgColor}; */\n\n  font-weight: 700;\n  font-size: 16px;\n`;\nconst BetaBadge = styled(UpgradeBadge)`\n  background-color: ${props => props.theme.beta};\n  padding-right: 15px;\n  padding-left: 15px;\n`;\n\nconst IconBtn = styled(FooterBtn)`\n  width: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${props => props.theme.snoozePanel.countBadgeColor};\n`;\n","// @flow\nimport type { SnoozeOption } from './calcSnoozeOptions';\nimport type { Props as SnoozeButtonProps } from './SnoozeButton';\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport bugsnag from '../../bugsnag';\nimport calcSnoozeOptions, {\n  SNOOZE_TYPE_REPEATED,\n  SNOOZE_TYPE_SPECIFIC_DATE,\n} from './calcSnoozeOptions';\nimport SnoozeButtonsGrid from './SnoozeButtonsGrid';\nimport { snoozeActiveTab } from '../../core/snooze';\nimport TooltipHelper from './TooltipHelper';\nimport UpgradeDialog from './UpgradeDialog';\nimport { DEFAULT_SETTINGS, getSettings } from '../../core/settings';\nimport {\n  isOverFreeWeeklyQuota,\n  isInPaywallTest,\n} from '../../core/license';\nimport SnoozeFooter from './SnoozeFooter';\nimport {\n  loadSoundEffect,\n  SOUND_TAB_SNOOZE1,\n  // SOUND_TAB_SNOOZE2,\n  // SOUND_TAB_SNOOZE3,\n} from '../../core/audio';\nimport keycode from 'keycode';\nimport { getSnoozedTabs } from '../../core/storage';\nimport {\n  countConsecutiveSnoozes,\n  IS_BETA,\n  createTab,\n  getActiveTab,\n} from '../../core/utils';\nimport { getUpgradeUrl } from '../../paths';\nimport Loadable from 'react-loadable';\nimport chromep from 'chrome-promise';\n\nconst AsyncComp = props =>\n  Loadable({ ...props, loading: () => null });\n\n// code splitting these big components\nconst AsyncPeriodSelector = AsyncComp({\n  loader: () => import('./PeriodSelector'),\n});\nconst AsyncDateSelector = AsyncComp({\n  loader: () => import('./DateSelector'),\n});\n\ntype Props = {\n  hideFooter: boolean,\n  // Props passed by TooltipHelper\n  tooltipVisible: boolean,\n  tooltipText: ?string,\n  preventTooltip: () => void,\n  onTooltipAreaMouseEnter: string => void,\n  onTooltipAreaMouseLeave: () => void,\n};\ntype State = {\n  selectedSnoozeOptionId: ?string,\n  focusedButtonIndex: number,\n  snoozeOptions: Array<SnoozeOption>,\n  isProUser: boolean,\n  // We delay date/period selection dialogs openining\n  // to give time for click animation to finish gracefuly\n  selectorDialogOpen: boolean,\n  isOverFreePlanLimit: boolean,\n};\n\nclass SnoozePanel extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      selectedSnoozeOptionId: null,\n      focusedButtonIndex: -1,\n      // show snooze options based on default settings, until\n      // user settings load, just show screen won't be blank and\n      // cause a flicker in rendering\n      snoozeOptions: calcSnoozeOptions(DEFAULT_SETTINGS),\n      // cache of license info\n      isProUser: false,\n\n      selectorDialogOpen: false,\n      isOverFreePlanLimit: false,\n    };\n\n    Promise.all([getSettings(), isInPaywallTest()]).then(\n      ([settings, isInPaywallTest]) =>\n        this.setState({\n          snoozeOptions: calcSnoozeOptions(settings),\n          isProUser: !isInPaywallTest,\n        })\n    );\n\n    setTimeout(() => {\n      isOverFreeWeeklyQuota().then(isOverFreePlanLimit =>\n        this.setState({\n          isOverFreePlanLimit,\n        })\n      );\n    }, 300);\n\n    // load the next snooze sound to play\n    loadSnoozeSound();\n  }\n\n  onKeyPress(event: Event) {\n    const {\n      focusedButtonIndex,\n      snoozeOptions,\n      isOverFreePlanLimit,\n    } = this.state;\n    let nextFocusedIndex = focusedButtonIndex;\n    const key = keycode(event);\n    const mappedOptionIndex =\n      key && SNOOZE_SHORTCUT_KEYS[key.toUpperCase()];\n    const numpadKey = parseInt(key);\n\n    if (isOverFreePlanLimit) {\n      // ignore shortcuts when Upgrade dialog is visible\n      return;\n    }\n\n    if (mappedOptionIndex != null) {\n      this.onSnoozeButtonClicked(\n        event,\n        snoozeOptions[mappedOptionIndex]\n      );\n      nextFocusedIndex = -1;\n    } else if (key === 'enter') {\n      if (nextFocusedIndex === -1) {\n        // select later by default\n        nextFocusedIndex = 0;\n      }\n\n      const focusedSnoozeOption = snoozeOptions[nextFocusedIndex];\n      this.onSnoozeButtonClicked(event, focusedSnoozeOption);\n      nextFocusedIndex = -1;\n    } else if (\n      Number.isInteger(numpadKey) &&\n      1 <= numpadKey &&\n      numpadKey <= 9\n    ) {\n      this.onSnoozeButtonClicked(event, snoozeOptions[numpadKey - 1]);\n      nextFocusedIndex = -1;\n    } else if (focusedButtonIndex === -1) {\n      nextFocusedIndex = 0;\n    } else if (key === 'left' && focusedButtonIndex % 3 !== 0) {\n      nextFocusedIndex -= 1;\n    } else if (key === 'right' && focusedButtonIndex % 3 !== 2) {\n      nextFocusedIndex += 1;\n    } else if (key === 'up' && focusedButtonIndex > 2) {\n      nextFocusedIndex -= 3;\n    } else if (key === 'down' && focusedButtonIndex < 6) {\n      nextFocusedIndex += 3;\n    } else if (key === 'tab') {\n      nextFocusedIndex =\n        (nextFocusedIndex + 1) % snoozeOptions.length;\n    }\n\n    this.setState({\n      focusedButtonIndex: nextFocusedIndex,\n    });\n  }\n\n  onSnoozeButtonClicked(event: Event, snoozeOption: SnoozeOption) {\n    const { selectedSnoozeOptionId } = this.state;\n    const { preventTooltip } = this.props;\n\n    if (selectedSnoozeOptionId != null) {\n      // ignore additional selections after first one\n      return;\n    }\n\n    this.setState({\n      selectedSnoozeOptionId: snoozeOption.id,\n    });\n\n    // Avoid showing tooltip after user already selected, its distructing\n    preventTooltip();\n\n    if (snoozeOption.when != null) {\n      // Perform snooze\n      const wakeupTime = snoozeOption.when.getTime();\n\n      delayedSnoozeActiveTab({\n        type: snoozeOption.id,\n        wakeupTime,\n        closeTab: !(event: any).altKey,\n      });\n    } else {\n      // either period or date selector opens as dialog\n      setTimeout(\n        () =>\n          this.setState({\n            selectorDialogOpen: true,\n          }),\n        400\n      );\n    }\n  }\n\n  onSnoozeSpecificDateSelected(date: Date) {\n    const { selectedSnoozeOptionId } = this.state;\n\n    delayedSnoozeActiveTab({\n      type: selectedSnoozeOptionId || '', // '' is for Flow to shutup\n      wakeupTime: date.getTime(),\n      closeTab: true,\n    });\n  }\n\n  onSnoozePeriodSelected(period: SnoozePeriod) {\n    const { selectedSnoozeOptionId, isProUser } = this.state;\n\n    if (!isProUser) {\n      createTab(getUpgradeUrl());\n      return;\n    }\n\n    delayedSnoozeActiveTab({\n      type: selectedSnoozeOptionId || '', // '' is for Flow to shutup\n      period,\n      closeTab: true,\n    });\n  }\n\n  getSnoozeButtons(snoozeOptions: Array<SnoozeOption>) {\n    const {\n      selectedSnoozeOptionId,\n      isProUser,\n      focusedButtonIndex,\n    } = this.state;\n    const {\n      onTooltipAreaMouseEnter,\n      onTooltipAreaMouseLeave,\n    } = this.props;\n\n    return snoozeOptions.map<SnoozeButtonProps>(\n      (snoozeOpt: SnoozeOption, index) => ({\n        ...snoozeOpt,\n        // remove pro badge for PRO users\n        proBadge: !isProUser && snoozeOpt.isProFeature,\n        focused: focusedButtonIndex === index,\n        pressed: selectedSnoozeOptionId === snoozeOpt.id,\n        onClick: (ev: Event) =>\n          this.onSnoozeButtonClicked(ev, snoozeOpt),\n        onMouseEnter: () =>\n          onTooltipAreaMouseEnter(snoozeOpt.tooltip),\n        onMouseLeave: () => onTooltipAreaMouseLeave(),\n      })\n    );\n  }\n\n  render() {\n    const {\n      selectedSnoozeOptionId,\n      snoozeOptions,\n      isProUser,\n      selectorDialogOpen,\n      isOverFreePlanLimit,\n    } = this.state;\n    const { tooltipText, tooltipVisible, hideFooter } = this.props;\n\n    // if snooze options haven't loaded yet, show nothing\n    if (!snoozeOptions) {\n      return null;\n    }\n\n    const snoozeButtons = this.getSnoozeButtons(snoozeOptions);\n\n    return (\n      <Root\n        onKeyDown={this.onKeyPress.bind(this)}\n        tabIndex=\"0\"\n        ref={ref => {\n          // autofocus Root so we get key press events\n          if (ref) ref.focus();\n        }}\n      >\n        <SnoozeButtonsGrid buttons={snoozeButtons} />\n        <SnoozeFooter\n          tooltip={{\n            visible: tooltipVisible || hideFooter,\n            text: tooltipText,\n          }}\n          upgradeBadge={!isProUser}\n          betaBadge={IS_BETA}\n        />\n        {selectedSnoozeOptionId === SNOOZE_TYPE_REPEATED && (\n          <AsyncPeriodSelector\n            onPeriodSelected={this.onSnoozePeriodSelected.bind(this)}\n            visible={\n              selectorDialogOpen &&\n              selectedSnoozeOptionId === SNOOZE_TYPE_REPEATED\n            }\n          />\n        )}\n        {selectedSnoozeOptionId === SNOOZE_TYPE_SPECIFIC_DATE && (\n          <AsyncDateSelector\n            onDateSelected={this.onSnoozeSpecificDateSelected.bind(\n              this\n            )}\n            visible={\n              selectorDialogOpen &&\n              selectedSnoozeOptionId === SNOOZE_TYPE_SPECIFIC_DATE\n            }\n          />\n        )}\n        <UpgradeDialog\n          onDismiss={() =>\n            this.setState({ isOverFreePlanLimit: false })\n          }\n          visible={isOverFreePlanLimit}\n        />\n      </Root>\n    );\n  }\n}\n\nlet snoozeSound;\n\nconst SNOOZE_SHORTCUT_KEYS: { [any]: number } = {\n  L: 0,\n  E: 1,\n  T: 2,\n  W: 3,\n  N: 4,\n  I: 5,\n  M: 5,\n  S: 6,\n  R: 7,\n  P: 8,\n  D: 8,\n};\nconst CONSECUTIVE_SNOOZE_TIMEOUT = 20 * 1000; //10s\nconst SNOOZE_SOUNDS = [\n  SOUND_TAB_SNOOZE1,\n  // SOUND_TAB_SNOOZE2,\n  // SOUND_TAB_SNOOZE3,\n];\n\n// give time for animation & sound to finish before snoozing (closing) tab\nfunction delayedSnoozeActiveTab(config: SnoozeConfig) {\n  snoozeActiveTab({\n    ...config,\n    // Don't close tab automatically, we close it ourselves in the lines below.\n    closeTab: false,\n  });\n\n  setTimeout(async () => {\n    // closing the tab closes the popup window. but if user requested that the tab\n    // remain open, we close the popup manually after a snooze\n    if (config.closeTab) {\n      // close tab manually\n      const activeTab = await getActiveTab();\n\n      chromep.tabs.remove(activeTab.id);\n    } else {\n      // just close extension popup window\n      window.close();\n    }\n  }, 1100);\n\n  playSnoozeSound();\n}\n\n/**\n * We play 3 sounds, one after the other, on each snooze.\n * when too much time passes by, it resets to first sound.\n * e.g.\n * example 1: soundA -> soundB -> soundC -> soundA\n * example 2: soundA -> soundB -> (much time has passed, reset) soundA\n */\nasync function loadSnoozeSound() {\n  const snoozedTabs = await getSnoozedTabs();\n  const consecutiveCount = countConsecutiveSnoozes(\n    snoozedTabs,\n    CONSECUTIVE_SNOOZE_TIMEOUT\n  );\n  const nextSoundIndex = consecutiveCount % SNOOZE_SOUNDS.length;\n  snoozeSound = loadSoundEffect(SNOOZE_SOUNDS[nextSoundIndex]);\n}\n\nfunction playSnoozeSound() {\n  if (snoozeSound) {\n    try {\n      snoozeSound.play();\n    } catch (err) {\n      bugsnag.notify(new Error(\"Couldn't play sound\"));\n    }\n  } else {\n    bugsnag.notify(new Error('Snooze sound file not loaded'));\n  }\n}\n\nexport default TooltipHelper(SnoozePanel);\n\nconst Root = styled.div`\n  position: relative;\n`;\n","export { default } from './SnoozePanel';\n","// @flow\n\nimport { addTrackingIdToUrl } from './core/analytics';\n\n// Base app file path\nexport const APP_BASE_PATH = '/index.html#';\n\n// App routes\nexport const POPUP_PATH = '/popup';\nexport const OPTIONS_PATH = '/options';\nexport const SLEEPING_TABS_PATH = '/options/sleeping-tabs';\nexport const SETTINGS_PATH = '/options/settings';\nexport const TODO_PATH = '/todo';\nexport const FIRST_SNOOZE_PATH = '/first-snooze';\nexport const RATE_TS_PATH = '/rate-tab-snooze';\nexport const BETA_PATH = '/beta';\nexport const TUTORIAL_PATH = '/tutorial';\n\n// A special route that is meant to execute the background.js\n// script, and not any GUI rendering.\n// **NOTE**: intentionally without a preceding '/'\nexport const BACKGROUND_PATH = 'background';\n\n// External links\nexport const CHROME_WEB_STORE_INSTALL_SHARE_LINK =\n  'http://bit.ly/get-tab-snooze';\nexport const CHROME_WEB_STORE_REVIEW =\n  'https://chrome.google.com/webstore/detail/tab-snooze/pdiebiamhaleloakpcgmpnenggpjbcbm/reviews';\nexport const PAYPAL_DONATE_URL =\n  'https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=82HLJCDURLVME&currency_code=USD&source=url';\nexport const CHROME_SETTINGS_SHORTCUTS =\n  'chrome://extensions/shortcuts';\nexport const MESSENGER_PROFILE_URL = 'https://m.me/tabsnooze';\nexport const CHANGELOG_URL =\n  'https://headwayapp.co/tab-snooze-changelog';\nexport const TAB_SNOOZE_FEATURE_VOTE_URL =\n  'https://tab-snooze.nolt.io/';\nexport const BETA_INSTRUCTIONS_URL =\n  'https://medium.com/@eyalw/tab-snooze-beta-b033d1e3e021';\nexport const TS_HOMEPAGE_URL =\n  process.env.NODE_ENV === 'development'\n    ? 'http://localhost:3000'\n    : 'https://tabsnooze.com';\nexport const SERVER_CONFIG_URL = `${TS_HOMEPAGE_URL}/serverConfig.json`;\n\n// URLS requires tracking id param:\nconst UPGRADE_URL = `${TS_HOMEPAGE_URL}/pro`;\nconst TRACK_UNINSTALL_URL = `${TS_HOMEPAGE_URL}/uninstalled`;\n\nexport const getTrackUninstallUrl = () =>\n  addTrackingIdToUrl(TRACK_UNINSTALL_URL);\nexport const getUpgradeUrl = () => addTrackingIdToUrl(UPGRADE_URL);\n","// @flow\nimport chromep from 'chrome-promise';\nimport moment from 'moment';\nimport { APP_BASE_PATH, BACKGROUND_PATH } from '../paths';\nimport URL from 'url';\n\n// Adding chrome manually to global scope, for ESLint\nconst chrome = window.chrome;\n\nconst AMAZON_AFFILIATE_ID = 'tabsnooze-20';\n\nexport function isBackgroundScript() {\n  const hashPath = window.location.hash.substring(1);\n  return hashPath === BACKGROUND_PATH;\n}\n\nexport function isMacOS() {\n  return navigator.platform.toUpperCase().indexOf('MAC') >= 0;\n}\n\nexport function exposeFunctionForDebug(functions: Array<Function>) {\n  if (!Array.isArray(functions)) {\n    functions = [functions];\n  }\n  // expose on window\n  functions.forEach(fn => (window[`tabSnoozeDebug_${fn.name}`] = fn));\n}\n\n/*\n    Create tabs and call callback() when they are all created.\n*/\nexport function createTabs(\n  tabInfos: Array<SnoozedTab>,\n  makeActive: boolean\n): Promise<Array<ChromeTab>> {\n  const allTabsCreatedPromise = Promise.all(\n    tabInfos.map(tabInfo =>\n      chromep.tabs.create({\n        url: tabInfo.url, // attachAffiliationTag(tabInfo.url),\n        active: makeActive,\n      })\n    )\n  );\n\n  return allTabsCreatedPromise;\n}\n\n// Attach affiliate tracking ID for amazon product links\nfunction attachAffiliationTag(url: string) {\n  if (!url.includes('amazon.')) {\n    return url; // as is\n  }\n  const parsedUrl = URL.parse(url, true /* parse query too */);\n\n  parsedUrl.query.tag = AMAZON_AFFILIATE_ID;\n  delete parsedUrl.search; // delete search so 'query' will be used for formatting\n\n  return URL.format(parsedUrl);\n}\n\nexport async function createCenteredWindow(\n  path: string,\n  width: number,\n  height: number\n) {\n  const newWindow = await chromep.windows.create({\n    type: 'popup',\n    state: 'normal',\n    url: APP_BASE_PATH + path,\n    left: Math.round((window.screen.width - width) / 2),\n    top: Math.round((window.screen.height - height) / 3),\n    width,\n    height,\n    focused: true,\n  });\n\n  chromep.windows.update(newWindow.id, { focused: true });\n}\n\nexport async function createTab(path: string) {\n  if (!path.startsWith('http')) {\n    path = APP_BASE_PATH + path;\n  }\n\n  const newTab = await chromep.tabs.create({\n    url: path,\n    active: true,\n  });\n\n  chromep.windows.update(newTab.windowId, { focused: true });\n}\n\n/* \n  Show desktop notification for the given tabs,\n  and make the jumpToTab active, if notification is clicked.\n*/\nexport async function notifyUserAboutNewTabs(\n  tabs: Array<SnoozedTab>,\n  jumpToTab: ChromeTab\n) {\n  const message = tabs.map(tab => tab.title).join('\\n');\n\n  const title =\n    'Tab Snooze woke up ' +\n    (tabs.length > 1 ? `${tabs.length} tabs` : 'a tab'); // plural handling\n  // Console log\n  console.log(title);\n\n  const faviconUrl = tabs[0].favicon;\n  let faviconURI;\n\n  if (faviconUrl) {\n    try {\n      faviconURI = await imageUrlToBase64(faviconUrl);\n    } catch (error) {\n      // ignore failed attempts to download image\n    }\n  }\n\n  // if failed to fetch favicon (CORS is annoying!)\n  if (!faviconURI) {\n    faviconURI = 'images/extension_icon_128.png';\n  }\n\n  // Desktop notification\n  const createdNotifId = await chromep.notifications.create('', {\n    type: 'basic',\n    title,\n    message,\n    iconUrl: faviconURI,\n  });\n\n  // chrome.windows.update(jumpToTab.windowId, {drawAttention: true});\n\n  chrome.notifications.onClicked.addListener(function makeTabActive(\n    notifId\n  ) {\n    if (notifId === createdNotifId) {\n      chromep.tabs.update(jumpToTab.id, { active: true });\n      chromep.windows.update(jumpToTab.windowId, {\n        focused: true,\n      });\n\n      chromep.notifications.clear(createdNotifId);\n      chrome.notifications.onClicked.removeListener(makeTabActive);\n    }\n  });\n}\n\nexport function addMinutes(date: Date, minutes: number) {\n  return new Date(date.getTime() + minutes * 60000);\n}\n\nexport async function getActiveTab() {\n  const tabs = await chromep.tabs.query({\n    active: true,\n    currentWindow: true,\n  });\n  return tabs[0];\n}\n\n/*\n    e.g. input\n    {\n        type: 'daily' | 'weekly' | 'monthly' | 'yearly',\n        day: 22, OR date: [1, 2] OR days: [0,5,6]\n        time: 23 // 11pm\n    }\n*/\nexport function calcNextOccurrenceForPeriod(\n  period: SnoozePeriod\n): Date {\n  let occurrences = [];\n\n  if (period.type === 'daily') {\n    const today = moment();\n    const tomorrow = moment().add(1, 'day');\n\n    occurrences = [today, tomorrow];\n  }\n\n  if (period.type === 'weekly') {\n    // occurences for this week and the next week\n    for (let weekIndex = 0; weekIndex < 2; weekIndex++) {\n      for (let weekdayIndex of period.days) {\n        occurrences.push(\n          moment()\n            .add(weekIndex, 'week')\n            .day(weekdayIndex)\n        );\n      }\n    }\n  }\n\n  if (period.type === 'monthly') {\n    const thisMonth = moment().date(period.day + 1); // +1, date() works not by index, by val\n    const nextMonth = moment(thisMonth).add(1, 'month');\n\n    occurrences = [thisMonth, nextMonth];\n  }\n\n  if (period.type === 'yearly') {\n    const thisYear = moment()\n      .month(period.date[0])\n      .date(period.date[1] + 1); // +1, date() works not by index, by val\n    const nextYear = moment(thisYear).add(1, 'year');\n\n    occurrences = [thisYear, nextYear];\n  }\n\n  // Find the first occurence that is in the future //\n\n  // we add 2 mins to 'now', to avoid accidently selecting an\n  // occurence that has just passed a second ago.\n  const now = moment().add(2, 'minute');\n\n  // Add specific hour to occurrences\n  occurrences = occurrences.map(occurrence =>\n    momentWithHour(occurrence, period.hour)\n  );\n\n  const nextFutureOccurrence = occurrences.find(occurrence =>\n    occurrence.isAfter(now)\n  );\n\n  if (!nextFutureOccurrence) {\n    throw new Error(\"Can't find next future occurrence\");\n  }\n\n  return nextFutureOccurrence.toDate();\n}\n\nfunction momentWithHour(aMoment: any, hour: number) {\n  const h = Math.floor(hour);\n  const m = Math.floor((hour - h) * 60); // 0.5h--> 30m\n\n  return aMoment\n    .hours(h)\n    .minutes(m)\n    .seconds(0);\n}\n\nexport const compareTabs = (tab1: SnoozedTab, tab2: SnoozedTab) =>\n  tab1.when === tab2.when\n    ? tab1.sleepStart - tab2.sleepStart\n    : tab1.when - tab2.when;\n\nexport const areTabsEqual = (tab1: SnoozedTab, tab2: SnoozedTab) =>\n  tab1.url === tab2.url && tab1.when === tab2.when;\n\nexport function ordinalNum(n: number) {\n  return moment.localeData().ordinal(n);\n}\n\n/**\n * Returns how many snooze events occured consecutively, with no more\n * than 10s between them.\n */\nexport function countConsecutiveSnoozes(\n  snoozedTabs: Array<SnoozedTab>,\n  consecutiveSnoozeTimeout: number\n): number {\n  // Sort tabs by sleep start. Most recently snoozed first.\n  snoozedTabs.sort((tabA, tabB) => tabB.sleepStart - tabA.sleepStart);\n\n  for (let i = 0; i < snoozedTabs.length; i++) {\n    const previousTime =\n      i === 0 ? Date.now() : snoozedTabs[i - 1].sleepStart;\n    const timeGap = previousTime - snoozedTabs[i].sleepStart;\n\n    if (timeGap > consecutiveSnoozeTimeout) {\n      return i;\n    }\n  }\n\n  return snoozedTabs.length;\n}\n\nexport function getRecentlySnoozedTab(\n  snoozedTabs: Array<SnoozedTab>\n): SnoozedTab {\n  // Sort tabs by sleep start. Most recently snoozed first.\n  snoozedTabs.sort((tabA, tabB) => tabB.sleepStart - tabA.sleepStart);\n\n  return snoozedTabs[0];\n}\n\nexport function getFirstTabToWakeup(\n  snoozedTabs: Array<SnoozedTab>\n): SnoozedTab {\n  // Sort tabs by sleep start. Most recently snoozed first.\n  snoozedTabs.sort((tabA, tabB) => tabA.when - tabB.when);\n\n  return snoozedTabs[0];\n}\n\n// export async function imageUrlToBase64(url: string): Promise<string> {\n//   return new Promise((resolve, reject) =>\n//     base64Img.requestBase64(url, (err, res, body) => {\n//       if (err) {\n//         reject(err);\n//       } else {\n//         resolve(body);\n//       }\n//     })\n//   );\n// }\n\n/**\n * We're not allowed to use setTimeout in bg scripts because they might not run.\n * So we use Alarms instead\n */\n// export function setAlarmTimeout(\n//   alarmName: string,\n//   callback: Function,\n//   timeout: number\n// ) {\n//   chrome.alarms.onAlarm.addListener(function listener(alarm) {\n//     if (alarm.name === alarmName) {\n//       // chrome.alarms.onAlarm.removeListener(listener);\n//       callback();\n//     }\n//   });\n\n//   chrome.alarms.create(alarmName, {\n//     when: Date.now() + timeout,\n//   });\n// }\n\nexport async function imageUrlToBase64(url: string): Promise<string> {\n  // if already base64 encoded, just return url.\n  if (url.startsWith('data:')) {\n    return url;\n  }\n\n  const response = await fetch(url);\n\n  if (!response.body) {\n    throw new Error('No body in response');\n  }\n\n  const base64 = await response.body\n    .getReader()\n    .read()\n    .then(result =>\n      btoa(String.fromCharCode.apply(null, result.value))\n    );\n\n  const type = response.headers.get('Content-Type');\n\n  if (!type) {\n    throw new Error('Failed to get content type');\n  }\n\n  const dataURI = 'data:' + type + ';base64,' + base64;\n\n  return dataURI;\n}\n\nexport const IS_BETA = process.env.REACT_APP_IS_BETA === 'true';\nexport const APP_VERSION = chrome.runtime.getManifest().version;\n\n// function findMinimum<T>(items: Array<T>, getValue: T => number) {\n//   let minimumItem = items[0];\n\n//   items.forEach(item => {\n//     if (getValue(item) < getValue(minimumItem)) {\n//       minimumItem = item;\n//     }\n//   });\n\n//   return minimumItem;\n// }\n","// @flow\nimport styled, { css } from 'styled-components';\nimport Color from 'color';\n\nexport default styled.button.attrs(props => ({\n  color: props.color || props.theme.primary,\n}))`\n  display: inline-block;\n  border: none;\n  cursor: pointer;\n  outline: inherit;\n\n  background-color: ${props => props.color};\n  padding: 12px 14px;\n  border-radius: 5px;\n  color: #fff;\n  font-weight: 500;\n  font-size: 17px;\n\n  svg {\n    margin-right: 10px;\n    vertical-align: center;\n  }\n\n  ${props =>\n    props.raised &&\n    css`\n      box-shadow: 0 3px 0 0\n        ${props =>\n          Color(props.color)\n            .darken(0.3)\n            .hex()};\n    `}\n\n  ${props =>\n    props.disabled &&\n    css`\n      pointer-events: none;\n      opacity: 0.6;\n    `}\n\n  ${props =>\n    props.icon &&\n    css`\n      background-image: url('${props.icon}');\n      background-position: 12px center;\n      background-repeat: no-repeat;\n      padding-left: 44px;\n    `}\n\n  transition: all 0.12s;\n  :hover {\n    background-color: ${props =>\n      Color(props.color)\n        .darken(0.1)\n        .hex()};\n  }\n  :active {\n    transform: scale(0.95);\n    background-color: ${props =>\n      Color(props.color)\n        .darken(0.3)\n        .hex()};\n  }\n`;\n"],"sourceRoot":""}